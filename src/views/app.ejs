<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="<%= csrf_token %>">
    <title>Mimos tia Pi</title>
    <link rel="icon" href="public/img/logo.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.min.css" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.0/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css" />
    <style>
        /***
        laranja : rgb(255,178,91)
        */
        body {
            background: linear-gradient(to bootom, rgb(216, 216, 214) 5%, rgb(133, 133, 124), rgb(106, 106, 104) 10%);
            margin: 0px !important;
            padding: 0px !important;
            height: 100%;
        }
        .footer {
            position: fixed;
            bottom: 0px;
            width: 100%;
            padding: 5px;
            color: black;
            background: linear-gradient(rgb(201, 155, 102), rgb(255,178,91), rgb(61, 43, 22));
            text-align: center;
            height: 35px;
            font-family: monospace;
            border-radius: 0px !important;
        }

        .mainNavi { 
            margin-left: -10px;
            padding: 0px !important;
            position: absolute;
            left: 0px;
            height: 100%;
            /*width: 300px;*/
            background: linear-gradient(rgb(161, 0, 108), rgb(130, 58, 106), rgb(210, 75, 167),  rgb(161, 0, 108));
            display: block;
            width: 23%;
            z-index: 1;
            display: block;
            clear: both;
        }
        .mainNavi ul { list-style: none; }
        .mainNavi ul li { margin-left: 20px; }
        .mainNavi .mainNaviHeader {
            padding: 10px;
            font-size: 25px;
            font-weight: bold;
        }
        .btn-custom { background: rgb(217,217,217); border : 1px solid white !important; width: 80%; }
        .btn-custom:hover { background: rgba(106, 101, 101, 0.5); color: white !important; }
        .bnt-custom:visited { color : white !important }
        .container-fluid { height: 100% !important; }
        .dashboard { margin-left: 20%; height: 100%; width: 80%; }
        .app-window { font-size: 14px; }
        .app-window input { font-size: 14px; }
        .app-window button { font-size: 15px; }
        #app-container {
            position: absolute;
            left: 5%;
            width: 70% !important;
            height: 90%;
        }
        .table-overflow-auto, .table-responsive { 
            max-height: 190px;
            overflow: auto;
            font-size: 13px;
        }
        .etiquetas-table label {
            font-size: 12.5px !important;
        }
        h2,h3 { font-size: 24px; }
        .clientes-table {
            position: relative;
            overflow: auto;
            max-height: 200px;
            width: 100%;
            padding: 0px;
            text-align: center;
        }
        .clientes-table thead th { position: sticky; top: 0; z-index: 1 !important; }
        table { border-collapse: collapse; width: 100%;}
        tr { cursor: pointer !important; }
        th, td { padding: 8px 16px; cursor: pointer; z-index: 1; }
        .btn-search { margin-left: -60%; margin-top: 0%; padding: 10px; background: rgb(130, 58, 106); border : 1px solid white !important; border-end-end-radius: 4px; border-top-right-radius: 4px; color: white}
        thead th { background-color: rgb(130, 58, 106) !important; }
        thead th:hover { background-color: rgb(33,37,41);}
        th:hover, td:hover { background-color: rgba(130, 58, 106, 0.8); color:azure }
        thead,tbody { text-align: center; }
        #form-abrir-caixa {position: absolute; top: 20%; left: 25%; }
        .select2-container--open {
            z-index: 9999999
        }
        #etiquetas-table > td:last-child { padding-bottom: 0px !important; }
        #etiquetas-table > tr > td:first-child:hover { 
            background-color: transparent !important;
        }
        .menuButtons span, .btn-menu {
            font-size: 13px;
        }
        @media (min-width: 1280px){
            .mainNavi {
                height: calc(100% + 45%) !important;
            }
        }
        .btn-group { margin-top: 25px; }
        .btn-danger-custom { background-color: #dc3545; color: white; }
        .btn-danger-custom:hover, .btn-danger-custom:focus { background-color: #bb2d3b; color : white }
    </style>
    
    <!-- APP CONTAINER MAIN -->
    <section class="container-fluid">
        <div class="row">
            
            <!-- MENU -->
            <aside class="mainNavi" id="mainNavi">
        
                <!-- HEADER -->
                <div class="mainNaviHeader text-center">
                    <span class="text-white">Mimos tia pi</span>
                </div>
        
                <!-- BUTTONS -->
                <ul class="list-style-none mt-2 menuButtons">
                    <li>
                        <div class="dropdown">
                            <button class="btn btn-custom dropdown-toggle" type="button" id="dropDownCadastros" data-bs-toggle="dropdown" aria-expanded="false">
                                <span><i class="fa fa-plus"></i> Cadastros</span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropDownCadastros">
                                <li class="btn-menu" target-window="clientes"><a class="dropdown-item" href="#"><i class="fa fa-user"></i> Clientes</a></li>
                                <li class="btn-menu" target-window="fornecedores"><a class="dropdown-item" href="#"><i class="fa fa-building"></i> Fornecedores</a></li>
                                <li class="btn-menu" target-window="vendedores"><a class="dropdown-item" href="#"><i class="fa fa-user"></i> Vendedores</a></li>
                                <li class="btn-menu" target-window="prestadores_servicos"><a class="dropdown-item" href="#"><i class="fa fa-user"></i> Prestadores de serviços</a></li>
                                <li class="btn-menu" target-window="funcionarios"><a class="dropdown-item" href="#"><i class="fa fa-user"></i> Funcionários</a></li>
                                <li class="btn-menu" target-window="produtos"><a class="dropdown-item" href="#"><i class="fa fa-plus"></i> Produtos</a></li>
                            </ul>
                        </div>
                    </li>
        
                    <li class="mt-4">
                        
                        <div class="dropdown">
                            <button class="btn btn-custom dropdown-toggle" type="button" id="dropDownEstoque" data-bs-toggle="dropdown" aria-expanded="false">
                                <span><i class="fa fa-box"></i> Estoque</span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropDownEstoque">
                                <li class="btn-menu" target-window="estoque_material_producao"><a class="dropdown-item" href="#"><i class="fa fa-box"></i> Estoque do material de produção</a></li>
                                <li class="btn-menu" target-window="estoque_produto_final"><a class="dropdown-item" href="#"><i class="fa fa-box-open"></i> Estoque de produto final</a></li>
                            </ul>
                        </div>
                    </li>
        
                    <li class="mt-4 btn-menu" target-window="caixa">
                        <button class="btn btn-custom" type="button" id="dropDownCadastros">
                            <span><i class="fa fa-dollar-sign"></i> Caixa</span>
                        </button>
                    </li>

                    <li class="mt-4">
                        <div class="dropdown">
                            <button class="btn btn-custom dropdown-toggle" type="button" id="dropDownFinanceiro" data-bs-toggle="dropdown" aria-expanded="false">
                                <span><i class="fa fa-dollar-sign"></i> Financeiro</span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropDownFinanceiro">
                                <li class="btn-menu" target-window="contas_pagar"><a class="dropdown-item" href="#"><i class="fa-solid fa-file-invoice-dollar"></i> Contas as pagar</a></li>
                                <li class="btn-menu" target-window="contas_receber"><a class="dropdown-item" href="#"><i class="fa-solid fa-hand-holding-dollar"></i> Contas as receber</a></li>
                            </ul>
                        </div>
                    </li>
        
                    <li class="mt-4">
                        <div class="dropdown">
                            <button class="btn btn-custom dropdown-toggle" type="button" id="dropDownRelatorios" data-bs-toggle="dropdown" aria-expanded="false">
                                <span><i class="fa fa-edit"></i> Relatórios</span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropDownRelatorios">
                                <li class="btn-menu" target-window="relatorios-vendas"><a class="dropdown-item" href="#"><i class="fa-regular fa-file-pdf"></i> Caixa</a></li>
                                <li class="btn-menu" target-window="relatorios-contas_pagar"><a class="dropdown-item" href="#"><i class="fa-regular fa-file-pdf"></i> Contas as pagar</a></li>
                                <li class="btn-menu" target-window="relatorios-contas_receber"><a class="dropdown-item" href="#"><i class="fa-regular fa-file-pdf"></i> Contas as receber</a></li>
                                <li class="btn-menu" target-window="relatorios-produto"><a class="dropdown-item" href="#"><i class="fa-regular fa-file-pdf"></i> Produtos</a></li>
                                <li class="btn-menu" target-window="relatorios-estoque_material_producao"><a class="dropdown-item" href="#"><i class="fa-regular fa-file-pdf"></i> Estoque material de produção</a></li>
                                <li class="btn-menu" target-window="relatorios-ordem_servico"><a class="dropdown-item" href="#"><i class="fa-regular fa-file-pdf"></i> Ordem de serviço</a></li>
                                <!-- <li class="btn-menu" target-window="relatorios-recibo"><a class="dropdown-item" href="#"><i class="fa-regular fa-file-pdf"></i> Recibo</a></li> -->
                            </ul>
                        </div>
                    </li>

                    <li class="mt-4 btn-menu" target-window="etiquetas">
                        <button class="btn btn-custom" type="button">
                            <span><i class="fa fa-barcode"></i> Gerar etiquetas</span>
                        </button>
                    </li>

                    <li class="mt-4 btn-menu" target-window="relatorios-recibo">
                        <button class="btn btn-custom" type="button" id="dropDownCadastros">
                            <span><i class="fa fa-newspaper"></i> Recibos</span>
                        </button>
                    </li>

                    <li class="mt-4" id="btn-logout">
                        <button class="btn btn-custom" type="button">
                            <span><i class="fa fa-sign-out"></i> Sair do sistema</span>
                        </button>
                    </li>

                </ul>
                
                <!-- LOGO -->
                <div class="text-center">
                    <img src="public/img/logo.png" alt="Mimos tia pi" class="img-responsive" style="margin-top: 10%;width: 40%;opacity:60%;">
                </div>
        
            </aside>
            
            <!-- TABLES AND FORMS -->
            <aside class="col-8 dashboard mt-4" id="app-container">

                <!-- LOADING DIV BEFORE LOADING WINDOWS -->
                <div class="load-window">
                    <div class="row">
                        <div class="col-12 text-center">
                            <p>Carregando o sistema...</p>
                        </div>
                    </div>
                </div>

                <!-- CADASTROS -->
                
                <!-- CLIENTES -->
                <div class="app-window" id="clientes">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col">
                                <h2><i class="fa fa-user"></i> Clientes cadastrados</h2>
                            </div>
                            <div class="col">
                                <aside class="flot-right">
                                    <div class="row">
                                        <div class="col-lg-10 col-sm-9" style="margin-left:-1%">
                                            <input type="search" id="clientes-search" data-bs-endpoint="clientes" data-bs-itemId="cliente" class="form-control w-100 inpt-search" placeholder="Procurar cliente(s)">
                                        </div>
                                        <div class="col">
                                            <i class="fa fa-search d-aboslute btn-search"></i>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="clientes-table table-overflow-auto">
                            <table class="table table-bordered table-striped">
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Nome</th>
                                        <th scope="col">CPF/CNPJ</th>
                                        <th scope="col">Endereço</th>
                                        <th scope="col">Telefone</th>
                                        <th scope="col">Whatsapp</th>
                                        <th scope="col">Instagram</th>
                                        <th scope="col">Data do registro</th>
                                    </tr>
                                </thead>
                                <tbody id="clientes-table">
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="row mt-2">
                        <div class="col-12 text-left mt-1" style="text-align:left">
                            <h2> Cadastrar ou alterar cliente</h2>
                        
                        </div>
                    </div>

                    <div class="row mt-4">

                        <input type="hidden" id="cliente-id">
                        <div class="col">
                            <div class="form-group">
                                <label for="cliente-nome" class="form-label">Nome do cliente</label>
                                <input type="text" class="form-control" placeholder="Nome" id="cliente-nome">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="cliente-cpf_cnpj" class="form-label">CPF/CNPJ</label>
                                <input type="text" class="form-control" placeholder="CPF/CNPJ" id="cliente-cpf_cnpj">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="cliente-endereco" class="form-label">Endereço</label>
                                <input type="text" class="form-control" placeholder="Endereço" id="cliente-endereco">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="cliente-ponto_referencia" class="form-label">Ponto de referência</label>
                                <input type="text" class="form-control" placeholder="Ponto de referência" id="cliente-ponto_referencia">
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-2">
                        <div class="col">
                            <div class="form-group">
                                <label for="cliente-telefone" class="form-label">Telefone fixo ou celular</label>
                                <input type="text" class="form-control" placeholder="Telefone fixo ou celular" id="cliente-telefone">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="cliente-whatsapp" class="form-label">Whatsapp</label>
                                <input type="text" class="form-control" placeholder="Whatsapp" id="cliente-whatsapp">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="cliente-instagram" class="form-label">Instagram</label>
                                <input type="text" class="form-control" placeholder="Instagram" id="cliente-instagram">
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col mt-4">
                            <button class="btn btn-success form-control form-btn" type="button" id="save-cliente"><i class="fa fa-save"></i> Salvar</button>
                        </div>
                        <div class="col mt-4">
                            <button class="btn btn-danger form-control" type="button" id="del-cliente" disabled><i class="fa fa-trash"></i> Excluir item</button>
                        </div>
                        <div class="alert alert-danger col-12 mt-4 text-center d-none" id="cliente-error"></div>
                    </div>

                </div>

                <!-- FORNECEDORES -->
                <div class="app-window" id="fornecedores">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col">
                                <h2><i class="fa fa-user"></i> Fornecedores cadastrados</h2>
                            </div>
                            <div class="col">
                                <aside class="flot-right">
                                    <div class="row">
                                        <div class="col-lg-10 col-sm-9" style="margin-left:-1%">
                                            <input type="search" id="fornecedores-search" data-bs-endpoint="fornecedores" data-bs-itemId="fornecedor" class="form-control w-100 inpt-search" placeholder="Procurar fornecedor(es)">
                                        </div>
                                        <div class="col">
                                            <i class="fa fa-search d-aboslute btn-search"></i>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="clientes-table table-overflow-auto">
                            <table class="table table-bordered table-striped">
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Nome</th>
                                        <th scope="col">CPF/CNPJ</th>
                                        <th scope="col">Endereço</th>
                                        <th scope="col">Telefone</th>
                                        <th scope="col">Whatsapp</th>
                                        <th scope="col">Instagram</th>
                                        <th scope="col">Data do registro</th>
                                    </tr>
                                </thead>
                                <tbody id="fornecedores-table">
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="row mt-2">
                        <div class="col-12 text-left mt-1" style="text-align:left">
                            <h2> Cadastrar ou alterar fornecedor</h2>
                        </div>
                    </div>

                    <div class="row mt-4">

                        <input type="hidden" id="fornecedor-id">
                        <div class="col">
                            <div class="form-group">
                                <label for="fornecedor-nome" class="form-label">Nome do fornecedor</label>
                                <input type="text" class="form-control" placeholder="Nome" id="fornecedor-nome">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="fornecedor-cpf_cnpj" class="form-label">CPF/CNPJ</label>
                                <input type="text" class="form-control" placeholder="CPF/CNPJ" id="fornecedor-cpf_cnpj">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="fornecedor-endereco" class="form-label">Endereço</label>
                                <input type="text" class="form-control" placeholder="Endereço" id="fornecedor-endereco">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="fornecedor-ponto_referencia" class="form-label">Ponto de referência</label>
                                <input type="text" class="form-control" placeholder="Ponto de referência" id="fornecedor-ponto_referencia">
                            </div>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col">
                            <div class="form-group">
                                <label for="fornecedor-telefone" class="form-label">Telefone fixo ou celular</label>
                                <input type="text" class="form-control" placeholder="Telefone fixo ou celular" id="fornecedor-telefone">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="fornecedor-whatsapp" class="form-label">Whatsapp</label>
                                <input type="text" class="form-control" placeholder="Whatsapp" id="fornecedor-whatsapp">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="fornecedor-instagram" class="form-label">Instagram</label>
                                <input type="text" class="form-control" placeholder="instagram" id="fornecedor-instagram">
                            </div>
                        </div>
                        <!-- <div class="col">
                            <div class="form-group">
                                <label for="fornecedor-instagram" class="form-label"></label>
                                <input type="text" class="form-control" placeholder="Instagram" id="fornecedor-instagram">
                            </div>
                        </div> -->
                    </div>

                    <div class="row mt-4">
                        <div class="col mt-4">
                            <button class="btn btn-success form-control form-btn" type="button" id="save-fornecedor"><i class="fa fa-save"></i> Salvar</button>
                        </div>
                        <div class="col mt-4">
                            <button class="btn btn-danger form-control" type="button" id="del-fornecedor" disabled><i class="fa fa-trash"></i> Excluir item</button>
                        </div>
                        <div class="alert alert-danger col-12 mt-4 text-center d-none" id="fornecedor-error"></div>
                    </div>

                </div>

                <!-- VENDEDORES -->
                <div class="app-window" id="vendedores">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col">
                                <h2><i class="fa fa-user"></i> Vendedores cadastrados</h2>
                            </div>
                            <div class="col">
                                <aside class="flot-right">
                                    <div class="row">
                                        <div class="col-lg-10 col-sm-9" style="margin-left:-1%">
                                            <input type="search" id="vendedores-search" data-bs-endpoint="vendedores" data-bs-itemId="vendedor" class="form-control w-100 inpt-search" placeholder="Procurar vendedor(es)">
                                        </div>
                                        <div class="col">
                                            <i class="fa fa-search d-aboslute btn-search"></i>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="vendedores-table table-overflow-auto">
                            <table class="table table-bordered table-striped">
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Nome</th>
                                        <th scope="col">CPF/CNPJ</th>
                                        <th scope="col">Endereço</th>
                                        <th scope="col">Telefone</th>
                                        <th scope="col">Whatsapp</th>
                                        <th scope="col">Instagram</th>
                                        <th scope="col">Data do registro</th>
                                    </tr>
                                </thead>
                                <tbody id="vendedores-table">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-12 text-left mt-1" style="text-align:left">
                            <h2> Cadastrar ou alterar vendedor</h2>
                        </div>
                    </div>

                    <div class="row mt-4">

                        <input type="hidden" id="vendedor-id">
                        <div class="col">
                            <div class="form-group">
                                <label for="vendedor-nome" class="form-label">Nome do vendedor</label>
                                <input type="text" class="form-control" placeholder="Nome" id="vendedor-nome">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="vendedor-cpf_cnpj" class="form-label">CPF/CNPJ</label>
                                <input type="text" class="form-control" placeholder="CPF/CNPJ" id="vendedor-cpf_cnpj">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="vendedor-endereco" class="form-label">Endereço</label>
                                <input type="text" class="form-control" placeholder="Endereço" id="vendedor-endereco">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="vendedor-ponto_referencia" class="form-label">Ponto de referência</label>
                                <input type="text" class="form-control" placeholder="Ponto de referência" id="vendedor-ponto_referencia">
                            </div>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col">
                            <div class="form-group">
                                <label for="vendedor-telefone" class="form-label">Telefone fixo ou celular</label>
                                <input type="text" class="form-control" placeholder="Telefone fixo ou celular" id="vendedor-telefone">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="vendedor-whatsapp" class="form-label">Whatsapp</label>
                                <input type="text" class="form-control" placeholder="Whatsapp" id="vendedor-whatsapp">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="vendedor-instagram" class="form-label">Instagram</label>
                                <input type="text" class="form-control" placeholder="Instagram" id="vendedor-instagram">
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col mt-4">
                            <button class="btn btn-success form-control form-btn" type="button" id="save-vendedor"><i class="fa fa-save"></i> Salvar</button>
                        </div>
                        <div class="col mt-4">
                            <button class="btn btn-danger form-control" type="button" id="del-vendedor" disabled><i class="fa fa-trash"></i> Excluir item</button>
                        </div>
                        <div class="alert alert-danger col-12 mt-4 text-center d-none" id="vendedor-error"></div>
                    </div>

                </div>

                <!-- PRESTADOR DE SERVICO -->
                <div class="app-window" id="prestadores_servicos">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col">
                                <h2><i class="fa fa-user"></i> Prestadores de serviços cadastrados</h2>
                            </div>
                            <div class="col">
                                <aside class="flot-right">
                                    <div class="row">
                                        <div class="col-lg-10 col-sm-9" style="margin-left:-1%">
                                            <input type="search" id="prestadores_servicos-search" data-bs-endpoint="prestadores_servicos" data-bs-itemId="prestador_servico" class="form-control w-100 inpt-search" placeholder="Procurar prestador(s) de serviço(s)">
                                        </div>
                                        <div class="col">
                                            <i class="fa fa-search d-aboslute btn-search"></i>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="prestadores_servicos-table table-overflow-auto">
                            <table class="table table-bordered table-striped">
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Nome</th>
                                        <th scope="col">CPF/CNPJ</th>
                                        <th scope="col">Endereço</th>
                                        <th scope="col">Telefone</th>
                                        <th scope="col">Whatsapp</th>
                                        <th scope="col">Instagram</th>
                                        <th scope="col">Data do registro</th>
                                    </tr>
                                </thead>
                                <tbody id="prestadores_servicos-table">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-12 text-left mt-1" style="text-align:left">
                            <h2> Cadastrar ou alterar prestador de serviço</h2>
                        </div>
                    </div>

                    <div class="row mt-4">

                        <input type="hidden" id="prestador_servico-id">
                        <div class="col">
                            <div class="form-group">
                                <label for="prestador_servico-nome" class="form-label">Nome do prestador de serviço</label>
                                <input type="text" class="form-control" placeholder="Nome" id="prestador_servico-nome">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="prestador_servico-cpf_cnpj" class="form-label">CPF/CNPJ</label>
                                <input type="text" class="form-control" placeholder="CPF/CNPJ" id="prestador_servico-cpf_cnpj">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="prestador_servico-endereco" class="form-label">Endereço</label>
                                <input type="text" class="form-control" placeholder="Endereço" id="prestador_servico-endereco">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="prestador_servico-ponto_referencia" class="form-label"></label>
                                <input type="text" class="form-control" placeholder="Ponto de referência" id="prestador_servico-ponto_referencia">
                            </div>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col">
                            <div class="form-group">
                                <label for="prestador_servico-telefone" class="form-label">Telefone</label>
                                <input type="text" class="form-control" placeholder="Telefone fixo ou celular" id="prestador_servico-telefone">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="prestador_servico-whatsapp" class="form-label">Whatsapp</label>
                                <input type="text" class="form-control" placeholder="Whatsapp" id="prestador_servico-whatsapp">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="prestador_servico-instagram" class="form-label">Instagram</label>
                                <input type="text" class="form-control" placeholder="Instagram" id="prestador_servico-instagram">
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col mt-4">
                            <button class="btn btn-success form-control form-btn" type="button" id="save-prestador_servico"><i class="fa fa-save"></i> Salvar</button>
                        </div>
                        <div class="col mt-4">
                            <button class="btn btn-danger form-control" type="button" id="del-prestador_servico" disabled><i class="fa fa-trash"></i> Excluir item</button>
                        </div>
                        <div class="alert alert-danger col-12 mt-4 text-center d-none" id="prestador_servico-error"></div>
                    </div>

                </div>

                <!-- FUNCIONARIOS -->
                <div class="app-window" id="funcionarios">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col">
                                <h2><i class="fa fa-user"></i> Funcionários cadastrados</h2>
                            </div>
                            <div class="col">
                                <aside class="flot-right">
                                    <div class="row">
                                        <div class="col-lg-10 col-sm-9" style="margin-left:-1%">
                                            <input type="search" id="funcionarios-search" data-bs-endpoint="funcionarios" data-bs-itemId="funcionario" class="form-control w-100 inpt-search" placeholder="Procurar funcionario(s)">
                                        </div>
                                        <div class="col">
                                            <i class="fa fa-search d-aboslute btn-search"></i>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="vendedores-table table-overflow-auto">
                            <table class="table table-bordered table-striped">
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Nome</th>
                                        <th scope="col">CPF</th>
                                        <th scope="col">Endereço</th>
                                        <th scope="col">Telefone</th>
                                        <th scope="col">Whatsapp</th>
                                        <th scope="col">Função</th>
                                        <th scope="col">Data do registro</th>
                                    </tr>
                                </thead>
                                <tbody id="funcionarios-table" class="text-center">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-12 text-left mt-1" style="text-align:left">
                            <h2> Cadastrar ou alterar funcionário</h2>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <input type="hidden" id="funcionario-id">
                        <div class="col">
                            <div class="form-group">
                                <label for="funcionario-nome" class="form-label">Nome do funcionário</label>
                                <input type="text" class="form-control" placeholder="Nome" id="funcionario-nome">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="funcionario-cpf_cnpj" class="form-label">CPF/CNPJ</label>
                                <input type="text" class="form-control" placeholder="CPF/CNPJ" id="funcionario-cpf_cnpj">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="funcionario-endereco" class="form-label">Endereço</label>
                                <input type="text" class="form-control" placeholder="Endereço" id="funcionario-endereco">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="funcionario-ponto_referencia" class="form-label">Ponto de referência</label>
                                <input type="text" class="form-control" placeholder="Ponto de referência" id="funcionario-ponto_referencia">
                            </div>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col">
                            <div class="form-group">
                                <label for="funcionario-telefone" class="form-label">Telefone fixo ou celular</label>
                                <input type="text" class="form-control" placeholder="Telefone fixo ou celular" id="funcionario-telefone">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="funcionario-whatsapp" class="form-label">Whatsapp</label>
                                <input type="text" class="form-control" placeholder="Whatsapp" id="funcionario-whatsapp">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="funcionario-funcao" class="form-label">Função ou cargo</label>
                                <input type="text" class="form-control" placeholder="Função ou cargo" id="funcionario-funcao">
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col mt-4">
                            <button class="btn btn-success form-control form-btn" type="button" id="save-funcionario"><i class="fa fa-save"></i> Salvar</button>
                        </div>
                        <div class="col mt-4">
                            <button class="btn btn-danger form-control" type="button" id="del-funcionario" disabled><i class="fa fa-trash"></i> Excluir item</button>
                        </div>
                        <div class="alert alert-danger col-12 mt-4 text-center d-none" id="funcionario-error"></div>
                    </div>

                </div>

                <!-- PRODUTOS -->
                 
                <div class="app-window" id="produtos">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col">
                                <h2><i class="fa fa-box-open"></i> Produtos cadastrados</h2>
                            </div>
                            <div class="col">
                                <aside class="flot-right">
                                    <div class="row">
                                        <div class="col-lg-10 col-sm-9" style="margin-left:-1%">
                                            <input type="search" id="produtos-search" data-bs-endpoint="produtos" data-bs-itemId="produto" class="form-control w-100 inpt-search" placeholder="Procurar produto(s)">
                                        </div>
                                        <div class="col">
                                            <i class="fa fa-search d-aboslute btn-search"></i>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="produtos-table table-overflow-auto">
                            <table class="table table-bordered table-striped">
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Foto</th>
                                        <th scope="col">Produto</th>
                                        <th scope="col">Seção</th>
                                        <th scope="col">Categoria</th>
                                        <th scope="col">Preço</th>
                                        <th scope="col">Desconto</th>
                                        <th scope="col">Cor/Estampa</th>
                                        <th scope="col">Descrição</th>
                                        <th scope="col">Usuário</th>
                                        <th scope="col">Data</th>
                                        <th scope="col">Qtd.</th>
                                    </tr>
                                </thead>
                                <tbody id="produtos-table" class="text-center">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-12 text-left mt-1" style="text-align:left">
                            <h3>Cadastrar ou alterar produtos</h3>
                        </div>
                    </div>

                    <input type="hidden" id="produto-foto" value="defaultProduct.png">
                    <input type="hidden" id="produto-id">

                    <div class="row">
                        <div class="col-6">
                            <div class="row">
                                <div class="col-12">
                                    <div class="file-loading">
                                        <input id="prd-foto" name="prd-foto[]" type="file" class="file" data-allowed-file-extensions='["png", "jpg", "jpeg"]' accept=".png,.jpg,.jpeg">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="row">
                                <div class="col">
                                    <div class="row">
                                        <div class="col-4 mr-0">
                                            <div class="form-group">
                                                <label for="produto-secao" class="form-label">Seção</label>
                                                <select id="produto-secao" class="form-select" aria-label="Secao" required>
                                                    <option selected disabled>-- escolha a seção do produto --</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-2" style="margin-left: -15px !important;margin-right: 10px !important;">
                                            <div class="btn-group" role="group" aria-label="Section buttons">
                                                <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modal_secao"><i class="fa fa-plus"></i></button>
                                                <button class="btn btn-primary" data-bs-toggle="modal" id="edit-secao" data-bs-target="#modal_secao" disabled><i class="fa fa-edit"></i></button>
                                            </div>
                                        </div>
                                        <div class="col-4 mr-0">
                                            <div class="form-group">
                                                <label for="produto-categoria" class="form-label">Categoria</label>
                                                <select id="produto-categoria" class="form-select" aria-label="Categoria" required>
                                                    <option selected disabled>-- escolha a categoria do produto --</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-2" style="margin-left: -15px !important;margin-right: 10px !important;">
                                            <div class="btn-group" role="group" aria-label="Categoria buttons">
                                                <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modal_categoria"><i class="fa fa-plus"></i></button>
                                                <button class="btn btn-primary" data-bs-toggle="modal" id="edit-categoria" data-bs-target="#modal_categoria" disabled><i class="fa fa-edit"></i></button>
                                            </div>
                                        </div>
                                        <div class="col-4 mr-0 mt-3">
                                            <div class="form-group">
                                                <label for="produto-cor" class="form-label">Cor ou estampa</label>
                                                <select id="produto-cor" class="form-select" aria-label="Cor" required>
                                                    <option selected disabled>-- escolha a cor do produto --</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-2 mt-3" style="margin-left: -15px !important;margin-right: 10px !important;">
                                            <div class="btn-group" role="group" aria-label="Colors buttons">
                                                <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modal_cor"><i class="fa fa-plus"></i></button>
                                                <button class="btn btn-primary" data-bs-toggle="modal" id="edit-cor" data-bs-target="#modal_cor" disabled><i class="fa fa-edit"></i></button>
                                            </div>
                                        </div>
                                        <div class="col-6 text-left mt-3">
                                            <div class="form-group">
                                                <label for="produto-nome" class="form-label">Nome do produto</label>
                                                <input type="text" class="form-control" placeholder="Nome do produto" id="produto-nome" required>
                                            </div>
                                        </div>
                                        <div class="col-4 mt-3">
                                            <div class="form-group">
                                                <label for="produto-preco" class="form-label">Preço R$</label>
                                                <input type="number" class="form-control" min="1" placeholder="Preço do produto" id="produto-preco" required>
                                            </div>
                                        </div>
                                        <div class="col-4 mt-3">
                                            <div class="form-group">
                                                <label for="produto-desconto" class="form-label">Desconto % <span class="fw-bold" id="desconto-produto"></span></label>
                                                <input type="number" class="form-control" min="1" placeholder="Desconto do produto" id="produto-desconto">
                                            </div>
                                        </div>
                                        <div class="col-4 mt-3">
                                            <div class="form-group">
                                                <label for="produto-quantidade" class="form-label">Quantidade</label>
                                                <input type="number" class="form-control" min="1" placeholder="Qtd. do produto" id="produto-quantidade">
                                            </div>
                                        </div>
                                        <div class="col mt-3">
                                            <div class="form-group">
                                                <label for="produto-descricao" class="form-label">Descrição</label>
                                                <input type="text" class="form-control" placeholder="Descrição do produto" id="produto-descricao" required>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-3">
                        <div class="col mt-1">
                            <button class="btn btn-success form-control form-btn" type="button" id="save-produto"><i class="fa fa-save"></i> Salvar</button>
                        </div>
                        <div class="col mt-1">
                            <button class="btn btn-danger form-control" type="button" id="del-produto" disabled><i class="fa fa-trash"></i> Excluir item</button>
                        </div>
                        <div class="alert alert-danger col-12 mt-4 text-center d-none" id="produto-error"></div>
                    </div>

                </div>

                <!-- ESTOQUE MATERIAL DE PRODUÇÃO -->
                <div class="app-window" id="estoque_material_producao">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col">
                                <h2><i class="fa fa-box-open"></i>Estoque de material para produção</h2>
                            </div>
                            <div class="col">
                                <aside class="flot-right">
                                    <div class="row">
                                        <div class="col-lg-10 col-sm-9" style="margin-left:-1%">
                                            <input type="search" id="estoque_material_producao-search" data-bs-endpoint="estoque_material_producao" data-bs-itemId="estoque_material_producao" class="form-control w-100 inpt-search" placeholder="Procurar no estoque">
                                        </div>
                                        <div class="col">
                                            <i class="fa fa-search d-aboslute btn-search"></i>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="estoque_material_producao-table table-overflow-auto">
                            <table class="table table-bordered table-striped">
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Especificação</th>
                                        <th scope="col">Cor/Estampa</th>
                                        <th scope="col">Unidade</th>
                                        <th scope="col">Entrada</th>
                                        <th scope="col">Saída</th>
                                        <th scope="col">Data do registro</th>
                                        <th scope="col">Estoque</th>
                                    </tr>
                                </thead>
                                <tbody id="estoque_material_producao-table">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-12 text-left mt-1" style="text-align:left">
                            <h2> Alterar estoque</h2>
                        </div>
                    </div>

                    <div class="row mt-4">

                        <input type="hidden" id="estoque_material_producao-id">
                        <div class="col">
                            <div class="form-group">
                                <label for="estoque_material_producao-especificacao" class="form-label">Especificação</label>
                                <input type="text" class="form-control" placeholder="Especificação" id="estoque_material_producao-especificacao">
                            </div>
                        </div>
                        <div class="col">
                            <div class="row">
                                <div class="col-8 mr-0">
                                    <div class="form-group">
                                        <label for="estoque_material_producao-cor" class="form-label">Cor</label>
                                        <select id="estoque_material_producao-cor" class="form-select" aria-label="Cor" required>
                                            <option selected disabled>-- escolha a cor do produto --</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="btn-group mt-4" role="group" aria-label="Colors buttons">
                                        <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modal_cor"><i class="fa fa-plus"></i></button>
                                        <button class="btn btn-primary" data-bs-toggle="modal" id="edit-cor" data-bs-target="#modal_cor" disabled><i class="fa fa-edit"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="estoque_material_producao-unidade" class="form-label">Unidade em metros</label>
                                <input type="number" class="form-control" placeholder="Unidade" id="estoque_material_producao-unidade">
                            </div>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col">
                            <div class="form-group">
                                <label for="estoque_material_producao-entrada" class="form-label">Entrada</label>
                                <input type="number" class="form-control" placeholder="Entrada" id="estoque_material_producao-entrada">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="estoque_material_producao-saida" class="form-label">Saída</label>
                                <input type="number" class="form-control" placeholder="Saída" id="estoque_material_producao-saida">
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col mt-4">
                            <button class="btn btn-success form-control form-btn" type="button" id="save-estoque_material_producao"><i class="fa fa-save"></i> Salvar</button>
                        </div>
                        <div class="col mt-4">
                            <button class="btn btn-danger form-control" type="button" id="del-estoque_material_producao" disabled><i class="fa fa-trash"></i> Excluir item</button>
                        </div>
                        <div class="alert alert-danger col-12 mt-4 text-center d-none" id="estoque_material_producao-error"></div>
                    </div>

                </div>

                <!-- ESTOQUE PRODUTO FINAL -->
                <div class="app-window" id="estoque_produto_final">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col">
                                <h2><i class="fa fa-box"></i> Estoque de produto final</h2>
                            </div>
                            <div class="col">
                                <aside class="flot-right">
                                    <div class="row">
                                        <div class="col-lg-10 col-sm-9" style="margin-left:-1%">
                                            <input type="search" id="estoque_produto_final_search" data-bs-endpoint="estoque_produto_final" data-bs-itemId="estoque_produto_final" class="form-control w-100 inpt-search" placeholder="Procurar no estoque">
                                        </div>
                                        <div class="col">
                                            <i class="fa fa-search d-aboslute btn-search"></i>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="estoque_produto_final-table table-overflow-auto">
                            <table class="table table-bordered table-striped">
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Produto</th>
                                        <th scope="col">Especificação</th>
                                        <th scope="col">Entrada</th>
                                        <th scope="col">Saída</th>
                                        <th scope="col">Data do registro</th>
                                        <th scope="col">Estoque</th>
                                    </tr>
                                </thead>
                                <tbody id="estoque_produto_final-table">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-12 text-left mt-1" style="text-align:left">
                            <h2> Alterar estoque</h2>
                        </div>
                    </div>

                    <div class="row mt-4">

                        <input type="hidden" id="estoque_produto_final-id">
                        <div class="col">
                            <div class="form-group">
                                <label for="estoque_produto_final-produto" class="form-label">Produto</label>
                                <select id="estoque_produto_final-produto" class="form-select" aria-label="Produto" required disabled>
                                    <option selected disabled>-- escolha o produto --</option>
                                </select>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="estoque_produto_final-especificacao" class="form-label">Especificação</label>
                                <input type="text" class="form-control" placeholder="Especificação" id="estoque_produto_final-especificacao">
                            </div>
                        </div>
                        <!-- <div class="col">
                            <div class="row d-none">
                                <div class="col-0 mr-0">
                                    <div class="form-group">
                                        <label for="estoque_produto_final-cor" class="form-label">Cor</label>
                                        <select id="estoque_produto_final-cor" class="form-select" aria-label="Cor" required>
                                            <option value="0" selected disabled>-- escolha a cor do produto --</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="btn-group mt-4" role="group" aria-label="Colors buttons">
                                        <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modal_cor"><i class="fa fa-plus"></i></button>
                                        <button class="btn btn-primary" data-bs-toggle="modal" id="edit-cor" data-bs-target="#modal_cor" disabled><i class="fa fa-edit"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div> -->
                    </div>

                    <div class="row mt-2">
                        <div class="col">
                            <div class="form-group">
                                <label for="estoque_produto_final-entrada" class="form-label">Entrada</label>
                                <input type="number" class="form-control" placeholder="Entrada" id="estoque_produto_final-entrada">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="estoque_produto_final-saida" class="form-label">Saída</label>
                                <input type="number" class="form-control" placeholder="Saída" id="estoque_produto_final-saida">
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col mt-4">
                            <button class="btn btn-success form-control form-btn" type="button" id="save-estoque_produto_final"><i class="fa fa-save"></i> Salvar</button>
                        </div>
                        <!-- <div class="col mt-4">
                            <button class="btn btn-danger form-control" type="button" id="del-estoque_produto_final" disabled><i class="fa fa-trash"></i> Excluir item</button>
                        </div> -->
                        <div class="alert alert-danger col-12 mt-4 text-center d-none" id="estoque_produto_final-error"></div>
                    </div>

                </div>

                <!-- CAIXA -->
                <div class="app-window" id="caixa">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col">
                                <h2>Caixa</h2>
                            </div>
                            <div class="col">
                                <aside class="flot-right">
                                    <div class="row">
                                        <div class="col-lg-10 col-sm-9" style="margin-left:-1%">
                                            <!-- <input type="search" id="" data-bs-endpoint="estoque_produto_final" data-bs-itemId="estoque_produto_final" class="form-control w-100 inpt-search" placeholder="Procurar funcionario(s)"> -->
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4 w-50 card" id="form-abrir-caixa">
                        <div class="card-body">
                            <div class="col-12">
                                <label for="caixa-id" class="mb-2"><i class="fa fa-dollar-sign"></i> Caixa</label>
                                <select class="form-select" id="caixa-id">
                                    <option selected disabled>-- selecione o caixa --</option>
                                </select>
                            </div>
                            <div class="col-12 mt-4">
                                <div class="btn-group w-100">
                                    <button class="btn btn-primary" type="button" id="btn-abrir-caixa" disabled><i class="fa fa-dollar-sign"></i> Abrir caixa</button>
                                    <button class="btn btn-info text-white" data-bs-toggle="modal" data-bs-target="#modal_add_caixa" id="edit-caixa" type="button" disabled><i class="fa fa-edit"></i> Editar caixa</button>
                                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modal_add_caixa" type="button"><i class="fa fa-plus"></i> Criar caixa</button>
                                </div>
                            </div>
                            <div class="alert alert-danger col-12 mt-4 text-center d-none" id="caixa-select-error"></div>
                        </div>
                    </div>

                    <!-- CAIXA APPS -->
                    <div class="row mt-4 d-none caixa-window">
                        <div class="caixa-table table-overflow-auto">
                            <table class="table table-bordered table-striped">
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Caixa</th>
                                        <th scope="col">Produto</th>
                                        <th scope="col">Forma de pagamento</th>
                                        <th scope="col">Qtd.</th>
                                        <th scope="col">Data do registro</th>
                                    </tr>
                                </thead>
                                <tbody id="caixa-table">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row mt-4 caixa-window d-none">
                        <div class="col-12 text-left mt-4" style="text-align:left">
                            <h2> Alterar caixa</h2>
                        </div>
                    </div>

                    <div class="row mt-4 caixa-window d-none">

                        <div class="col">
                            <div class="form-group">
                                <label for="caixa-entrada" class="form-label">Entrada</label>
                                <input type="text" class="form-control" value="0" id="caixa-entrada" disabled>
                            </div>
                        </div>

                        <div class="col">
                            <div class="form-group">
                                <label for="caixa-saida" class="form-label">Saída</label>
                                <input type="text" class="form-control" value="0" id="caixa-saida" disabled>
                            </div>
                        </div>

                        <div class="col">
                            <div class="form-group">
                                <label for="caixa-saldo" class="form-label">Saldo</label>
                                <input type="text" class="form-control" value="0" id="caixa-saldo" disabled>
                            </div>
                        </div>

                    </div>

                    <div class="row mt-4 caixa-window d-none">
                        <div class="col mt-4">
                            <button class="btn btn-success form-control" data-bs-toggle="modal" data-bs-target="#modal_lancar_caixa" type="button" id="lancar-caixa"><i class="fa fa-dollar-sign"></i> Vender produto</button>
                            <!-- <button class="btn btn-success form-control" data-bs-toggle="modal" data-bs-target="#modal_caixa_add" type="button" id="save-caixa"><i class="fa fa-plus"></i> Incluir</button> -->
                        </div>
                        <div class="col mt-4">
                            <button class="btn btn-warning form-control" type="button" id="lancar-saida-caixa" data-bs-toggle="modal" data-bs-target="#modal_saida_caixa"><i class="fa fa-minus"></i> Lançar saída</button>
                        </div>
                        <div class="col mt-4">
                            <button class="btn btn-primary form-control" type="button" id="fechar-caixa"><i class="fa fa-xmark"></i> Fechar caixa</button>
                        </div>
                        <div class="alert alert-danger col-12 mt-4 text-center d-none" id="caixa-error"></div>
                    </div>

                </div>

                <!-- CONTAS A PAGAR -->
                <div class="app-window" id="contas_pagar">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col">
                                <h2><i class="fa fa-dollar-sign"></i> Contas a pagar</h2>
                            </div>
                            <div class="col">
                                <aside class="flot-right">
                                    <div class="row">
                                        <div class="col-lg-10 col-sm-9" style="margin-left:-1%">
                                            <input type="search" id="clientes-search" data-bs-endpoint="clientes" data-bs-itemId="cliente" class="form-control w-100 inpt-search" placeholder="Procurar cliente(s)">
                                        </div>
                                        <div class="col">
                                            <i class="fa fa-search d-aboslute btn-search"></i>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="contas_pagar-table table-overflow-auto">
                            <table class="table table-bordered table-striped">
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Fornecedor</th>
                                        <!-- <th scope="col">CPF/CNPJ</th> -->
                                        <th scope="col">Valor</th>
                                        <th scope="col">Forma de pagamento</th>
                                        <th scope="col">Desconto</th>
                                        <th scope="col">Descrição</th>
                                        <th scope="col">Valor pago</th>
                                        <th scope="col">Título pago</th>
                                        <th scope="col">Data do registro</th>
                                    </tr>
                                </thead>
                                <tbody id="contas_pagar-table">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-12 text-left mt-1" style="text-align:left">
                            <h2> Lançar conta a pagar</h2>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <input type="hidden" id="contas_pagar-id">
                        <div class="col">
                            <div class="form-group">
                                <label for="contas_pagar-fornecedor_id" class="form-label">Fornecedor</label>
                                <select id="contas_pagar-fornecedor_id" class="form-select" required></select>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="contas_pagar-valor" class="form-label">Valor a pagar R$</label>
                                <input type="number" id="contas_pagar-valor" class="form-control" placeholder="Valor">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="contas_pagar-valor_pago" class="form-label">Valor pago R$</label>
                                <input type="number" class="form-control" placeholder="Valor pago" id="contas_pagar-valor_pago">
                            </div>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col">
                            <div class="form-group mt-4">
                                <label for="contas_pagar-desconto" class="form-label">Desconto do pagamento % <span class="fw-bold" id="desconto-contas_pagar"></span></label>
                                <input type="number" class="form-control" placeholder="Desconto" id="contas_pagar-desconto">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group mt-4">
                                <label for="contas_pagar-forma_pagamento" class="mb-2">Forma de pagamento</label>
                                <select id="contas_pagar-forma_pagamento" class="form-select"></select>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group mt-4">
                                <label for="contas_pagar-descricao" class="form-label">Descrição</label>
                                <input type="text" class="form-control" placeholder="Descrição" id="contas_pagar-descricao">
                            </div>
                        </div>
                    </div>

                    <input type="hidden" id="contas_pagar-pago" value="0">

                    <div class="row mt-4">
                        <div class="col mt-4">
                            <button class="btn btn-success form-control form-btn" type="button" id="save-contas_pagar"><i class="fa fa-save"></i> Salvar</button>
                        </div>
                        <div class="col mt-4">
                            <button class="btn btn-danger form-control" type="button" id="del-contas_pagar" disabled><i class="fa fa-trash"></i> Excluir item</button>
                        </div>
                        <div class="alert alert-danger col-12 mt-4 text-center d-none" id="contas_pagar-error"></div>
                    </div>

                </div>

                <!-- CONTAS RECEBER -->
                <div class="app-window" id="contas_receber">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col">
                                <h2><i class="fa fa-dollar-sign"></i> Contas a receber</h2>
                            </div>
                            <div class="col">
                                <aside class="flot-right">
                                    <div class="row">
                                        <div class="col-lg-10 col-sm-9" style="margin-left:-1%">
                                            <input type="search" id="clientes-search" data-bs-endpoint="clientes" data-bs-itemId="cliente" class="form-control w-100 inpt-search" placeholder="Procurar cliente(s)">
                                        </div>
                                        <div class="col">
                                            <i class="fa fa-search d-aboslute btn-search"></i>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="contas_receber-table table-overflow-auto">
                            <table class="table table-bordered table-striped">
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Cliente</th>
                                        <!-- <th scope="col">CPF/CNPJ</th> -->
                                        <th scope="col">Valor</th>
                                        <th scope="col">Forma de pagamento</th>
                                        <th scope="col">Desconto</th>
                                        <th scope="col">Descrição</th>
                                        <th scope="col">Valor recebido</th>
                                        <th scope="col">Título pago</th>
                                        <th scope="col">Data do registro</th>
                                    </tr>
                                </thead>
                                <tbody id="contas_receber-table">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-12 text-left mt-1" style="text-align:left">
                            <h2> Lançar conta a receber</h2>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <input type="hidden" id="contas_receber-id">
                        <div class="col">
                            <div class="form-group">
                                <label for="contas_receber-cliente_id" class="form-label">Cliente</label>
                                <select id="contas_receber-cliente_id" class="form-select"></select>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="contas_receber-valor" class="form-label">Valor a receber R$</label>
                                <input type="number" id="contas_receber-valor" class="form-control" placeholder="Valor">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="contas_receber-valor_pago" class="form-label">Valor recebido R$</label>
                                <input type="number" class="form-control" placeholder="Valor recebido" id="contas_receber-valor_pago">
                            </div>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col">
                            <div class="form-group mt-4">
                                <label for="contas_receber-desconto" class="form-label">Desconto % <span class="fw-bold" id="desconto-contas_receber"></span></label>
                                <input type="number" class="form-control" placeholder="Desconto" id="contas_receber-desconto">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group mt-4">
                                <label for="contas_receber-forma_pagamento" class="mb-2">Forma de pagamento</label>
                                <select id="contas_receber-forma_pagamento" class="form-select"></select>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group mt-4">
                                <label for="contas_receber-descricao" class="form-label">Descrição</label>
                                <input type="text" class="form-control" placeholder="Descrição" id="contas_receber-descricao">
                            </div>
                        </div>
                    </div>

                    <input type="hidden" id="contas_receber-pago" value="0">

                    <div class="row mt-4">
                        <div class="col mt-4">
                            <button class="btn btn-success form-control form-btn" type="button" id="save-contas_receber"><i class="fa fa-save"></i> Salvar</button>
                        </div>
                        <div class="col mt-4">
                            <button class="btn btn-danger form-control" type="button" id="del-contas_receber" disabled><i class="fa fa-trash"></i> Excluir item</button>
                        </div>
                        <div class="alert alert-danger col-12 mt-4 text-center d-none" id="contas_receber-error"></div>
                    </div>

                </div>

                <!-- ETIQUETAS -->
                <div class="app-window" id="etiquetas">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col">
                                <h2><i class="fa fa-barcode"></i> Criar etiquetas</h2>
                            </div>
                            <div class="col">
                                <aside class="flot-right">
                                    <div class="row">
                                        <div class="col-lg-10 col-sm-9" style="margin-left:-1%">
                                            <input type="search" id="etiquetas-search" data-bs-endpoint="etiquetas" data-bs-itemId="etiquetas" class="form-control w-100 inpt-search" placeholder="Procurar etiqueta(s)">
                                        </div>
                                        <div class="col">
                                            <i class="fa fa-search d-aboslute btn-search"></i>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-2 p-2 card">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="etiquetas-btn-select-all" id="etiquetas-btn-select-all">
                                <label class="form-check-label" for="etiquetas-btn-select-all" style="font-size: 16px;cursor:pointer;">Selecionar todos</label>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4 p-0">
                        <div class="etiquetas-table table-overflow-auto card p-0 m-0" style="padding-bottom: 0px !important;">
                            <table class="table table-bordered table-striped" style="padding-bottom: 0px !important;">
                                <thead class="table-dark text-center">
                                    <tr>
                                        <th scope="col">Selecionar</th>
                                        <th scope="col">Foto</th>
                                        <th scope="col">Produto</th>
                                        <th scope="col">Seção</th>
                                        <th scope="col">Categoria</th>
                                        <th scope="col">Preço</th>
                                        <th scope="col">Desconto</th>
                                        <th scope="col">Descrição</th>
                                        <th scope="col">Cor</th>
                                        <th scope="col">Usuário</th>
                                        <th scope="col">Data do registro</th>
                                    </tr>
                                </thead>
                                <tbody id="etiquetas-table" class="text-center" style="padding:0px !important;margin:0px !important;">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-12 text-left mt-4" style="text-align:left">
                            <h2> Etiquetas</h2>
                        </div>
                    </div>

                    <div class="row mt-1">
                        <input type="hidden" id="etiquetas-id">
                        <div class="col">
                            <input type="hidden" id="etiquetas-ids">
                            <div class="form-group">
                                <label for="etiquetas-produtos" class="form-label">Produtos selecinados</label>
                                <textarea id="etiquetas-produtos" class="form-control" rows="4" disabled></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-1">
                        <div class="col mt-2">
                            <button class="btn btn-success form-control" type="button" id="btn-etiquetas"><i class="fa fa-barcode"></i> Gerar etiquetas</button>
                        </div>
                        <div class="alert alert-danger col-12 mt-4 text-center d-none" id="etiquetas-error"></div>
                    </div>

                </div>

                <!-- RELATORIO DO CAIXA -->
                <div class="app-window" id="relatorios-vendas">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col-12">
                                <h2><i class="fa fa-file-pdf"></i> Relatório do caixa</h2>
                            </div>
                            <div class="col-6 p-4 rounded" style="margin-left: 25%;margin-top:14%;box-shadow:1px 1px 1px 2.5px rgba(0,0,0,.06);">
                                <aside>
                                    <div class="row">
                                        <div class="col mt-2">
                                            <div class="form-group">
                                                <label for="relatorio-vendas-periodo_inicial" class="form-label"><i class="fa fa-calendar"></i> Data inicial</label>
                                                <input type="date" id="relatorio-vendas-periodo_inicial" class="form-control" placeholder="Data inicial">
                                            </div>
                                        </div>
                                        <div class="col mt-2">
                                            <div class="form-group">
                                                <label for="relatorio-vendas-periodo_final" class="form-label"><i class="fa fa-calendar"></i> Data final</label>
                                                <input type="date" id="relatorio-vendas-periodo_final" class="form-control" placeholder="Data final">
                                            </div>
                                        </div>
                                        <div class="col-12 mt-5">
                                            <button class="btn btn-success form-control" id="relatorio-vendas-btn" type="button"><div class="i fa fa-file-pdf"></div> Imprimir relatório do caixa</button>
                                            <div class="alert alert-danger mt-3 text-center p-1 d-none" id="relatorio-vendas-error"></div>
                                            <div class="loading-print mt-3 mb-2 p-2 text-center d-none"><img src="public/img/load.gif" alt="Carregando..." width="10%"></div>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- RELATORIO DE ESTOQUE MATERIAL PRODUCAO -->
                <div class="app-window" id="relatorios-estoque_material_producao">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col-12">
                                <h2><i class="fa fa-file-pdf"></i> Relatório do estoque de material pra produção</h2>
                            </div>
                            <div class="col-6 p-4 rounded" style="margin-left: 25%;margin-top:14%;box-shadow:1px 1px 1px 2.5px rgba(0,0,0,.06);">
                                <aside>
                                    <div class="row">
                                        <div class="col mt-2">
                                            <div class="form-group">
                                                <label for="relatorio-estoque_material_producao-periodo_inicial" class="form-label"><i class="fa fa-calendar"></i> Data inicial</label>
                                                <input type="date" id="relatorio-estoque_material_producao-periodo_inicial" class="form-control" placeholder="Data inicial">
                                            </div>
                                        </div>
                                        <div class="col mt-2">
                                            <div class="form-group">
                                                <label for="relatorio-estoque_material_producao-periodo_final" class="form-label"><i class="fa fa-calendar"></i> Data final</label>
                                                <input type="date" id="relatorio-estoque_material_producao-periodo_final" class="form-control" placeholder="Data final">
                                            </div>
                                        </div>
                                        <div class="col-12 mt-5">
                                            <button class="btn btn-success form-control" id="relatorio-estoque_material_producao-btn" type="button"><div class="i fa fa-file-pdf"></div> Imprimir relatório de material pra produção</button>
                                            <div class="alert alert-danger mt-3 text-center p-1 d-none" id="relatorio-estoque_material_producao-error"></div>
                                            <div class="loading-print mt-3 mb-2 p-2 text-center d-none"><img src="public/img/load.gif" alt="Carregando..." width="10%"></div>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="app-window" id="relatorios-produto">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col-12">
                                <h2><i class="fa fa-file-pdf"></i> Relatório de produtos</h2>
                            </div>
                            <div class="col-6 p-4 rounded" style="margin-left: 25%;margin-top:14%;box-shadow:1px 1px 1px 2.5px rgba(0,0,0,.06);">
                                <aside>
                                    <div class="row">
                                        <div class="col mt-2">
                                            <div class="form-group">
                                                <label for="relatorio-produto-periodo_inicial" class="form-label"><i class="fa fa-calendar"></i> Data inicial</label>
                                                <input type="date" id="relatorio-produto-periodo_inicial" class="form-control" placeholder="Data inicial">
                                            </div>
                                        </div>
                                        <div class="col mt-2">
                                            <div class="form-group">
                                                <label for="relatorio-produto-periodo_final" class="form-label"><i class="fa fa-calendar"></i> Data final</label>
                                                <input type="date" id="relatorio-produto-periodo_final" class="form-control" placeholder="Data final">
                                            </div>
                                        </div>
                                        <div class="col-12 mt-5">
                                            <button class="btn btn-success form-control" id="relatorio-produto-btn" type="button"><div class="i fa fa-file-pdf"></div> Imprimir relatório de produtos</button>
                                            <div class="alert alert-danger mt-3 text-center p-1 d-none" id="relatorio-produto-error"></div>
                                            <div class="loading-print mt-3 mb-2 p-2 text-center d-none"><img src="public/img/load.gif" alt="Carregando..." width="10%"></div>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- RELATORIO CONTAS PAGAR -->
                <div class="app-window" id="relatorios-contas_pagar">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col-12">
                                <h2><i class="fa fa-file-pdf"></i> Relatório de contas a pagar</h2>
                            </div>
                            <div class="col-6 p-4 rounded" style="margin-left: 25%;margin-top:14%;box-shadow:1px 1px 1px 2.5px rgba(0,0,0,.06);">
                                <aside>
                                    <div class="row">
                                        <div class="col mt-2">
                                            <div class="form-group">
                                                <label for="relatorio-contas_pagar-periodo_inicial" class="form-label"><i class="fa fa-calendar"></i> Data inicial</label>
                                                <input type="date" id="relatorio-contas_pagar-periodo_inicial" class="form-control" placeholder="Data inicial">
                                            </div>
                                        </div>
                                        <div class="col mt-2">
                                            <div class="form-group">
                                                <label for="relatorio-contas_pagar-periodo_final" class="form-label"><i class="fa fa-calendar"></i> Data final</label>
                                                <input type="date" id="relatorio-contas_pagar-periodo_final" class="form-control" placeholder="Data final">
                                            </div>
                                        </div>
                                        <div class="col-12 mt-5">
                                            <button class="btn btn-success form-control" id="relatorio-contas_pagar-btn" type="button"><div class="i fa fa-file-pdf"></div> Imprimir relatório de contas a pagar</button>
                                            <div class="alert alert-danger mt-3 text-center p-1 d-none" id="relatorio-contas_pagar-error"></div>
                                            <div class="loading-print mt-3 mb-2 p-2 text-center d-none"><img src="public/img/load.gif" alt="Carregando..." width="10%"></div>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- RELATORIO CONTAS RECEBER -->
                <div class="app-window" id="relatorios-contas_receber">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col-12">
                                <h2><i class="fa fa-file-pdf"></i> Relatório de contas a receber</h2>
                            </div>
                            <div class="col-6 p-4 rounded" style="margin-left: 25%;margin-top:14%;box-shadow:1px 1px 1px 2.5px rgba(0,0,0,.06);">
                                <aside>
                                    <div class="row">
                                        <div class="col mt-2">
                                            <div class="form-group">
                                                <label for="relatorio-contas_receber-periodo_inicial" class="form-label"><i class="fa fa-calendar"></i> Data inicial</label>
                                                <input type="date" id="relatorio-contas_receber-periodo_inicial" class="form-control" placeholder="Data inicial">
                                            </div>
                                        </div>
                                        <div class="col mt-2">
                                            <div class="form-group">
                                                <label for="relatorio-contas_receber-periodo_final" class="form-label"><i class="fa fa-calendar"></i> Data final</label>
                                                <input type="date" id="relatorio-contas_receber-periodo_final" class="form-control" placeholder="Data final">
                                            </div>
                                        </div>
                                        <div class="col-12 mt-5">
                                            <button class="btn btn-success form-control" id="relatorio-contas_receber-btn" type="button"><div class="i fa fa-file-pdf"></div> Imprimir relatório de contas a receber</button>
                                            <div class="alert alert-danger mt-3 text-center p-1 d-none" id="relatorio-contas_receber-error"></div>
                                            <div class="loading-print mt-3 mb-2 p-2 text-center d-none"><img src="public/img/load.gif" alt="Carregando..." width="10%"></div>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- RELATORIO ORDEM DE SERVICO -->
                <div class="app-window" id="relatorios-ordem_servico">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col-12">
                                <h2><i class="fa fa-file-pdf"></i> Relatório ordem de serviço</h2>
                            </div>
                            <div class="col-5 p-4 rounded" style="margin-left: 25%;margin-top:14%;box-shadow:1px 1px 1px 2.5px rgba(0,0,0,.06);">
                                <aside>
                                    <div class="row">
                                        <input type="hidden" id="relatorio-ordem_servico-produtos">
                                        <div class="col-9 mr-0">
                                            <div class="form-group">
                                                <label for="relatorio-ordem_servico-produto" class="form-label">Produto</label>
                                                <select id="relatorio-ordem_servico-produto" class="form-select" aria-label="Produto" style="width: 100%;">
                                                    <option selected disabled>-- escolha o produto --</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-1 mt-1">
                                            <div class="btn-group mt-4" role="group" aria-label="Section buttons">
                                                <button class="btn btn-success" id="btn-add-produto-ordem_servico"><i class="fa fa-plus"></i></button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mt-4">
                                        <div class="form-group">
                                            <label for="relatorio-ordem_servico-quantidade" class="form-label">Quantidade para produção</label>
                                            <input type="text" id="relatorio-ordem_servico-quantidade" class="form-control" disabled>
                                        </div>
                                    </div>
                                    <div class="row mt-4">
                                        <div class="col ml-5 mt-2">
                                            <span class="text-success" id="ordem_servico-span">0 produtos selecionados</span>
                                        </div>
                                        <div class="col-6" style="margin-left:10%;text-align:right !important">
                                            <button class="btn btn-success" id="relatorio-ordem_servico-btn"><i class="fa fa-file-pdf"></i> Imprimir ordem</button>
                                            <div class="alert alert-danger mt-3 text-center p-1 d-none" id="relatorio-ordem_servico-error"></div>
                                            <div class="loading-print mt-3 mb-2 p-2 text-center d-none"><img src="public/img/load.gif" alt="Carregando..." width="10%"></div>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- RECIBO -->
                <div class="app-window" id="relatorios-recibo">

                    <div style="text-align: left;">
                        <div class="row">
                            <div class="col-12">
                                <h2><i class="fa fa-file-pdf"></i> Recibo</h2>
                            </div>
                            <div class="col-8 p-4 rounded" style="margin-left: 16%;margin-top:14%;box-shadow:1px 1px 1px 2.5px rgba(0,0,0,.06);">
                                <aside>
                                    <div class="row">
                                        <div class="col-6 mt-2">
                                            <div class="form-group">
                                                <label for="relatorio-recibo-nome" class="form-label"><i class="fa fa-user"></i> Recibo para</label>
                                                <input type="text" id="relatorio-recibo-nome" class="form-control" placeholder="Digite quem recebera o recibo">
                                            </div>
                                        </div>
                                        <div class="col-6 mt-2">
                                            <div class="form-group">
                                                <label for="relatorio-recibo-cpf_cnpj" class="form-label"><i class="fa fa-edit"></i> CPF/CNPJ</label>
                                                <input type="text" id="relatorio-recibo-cpf_cnpj" class="form-control" placeholder="CPF/CNPJ">
                                            </div>
                                        </div>
                                        <div class="col-4 mt-4">
                                            <div class="form-group">
                                                <label for="relatorio-recibo-valor" class="form-label"><i class="fa fa-dollar-sign"></i> Valor do recibo</label>
                                                <input type="number" id="relatorio-recibo-valor" class="form-control" placeholder="Valor">
                                            </div>
                                        </div>
                                        <div class="col-8 mt-4">
                                            <div class="form-group">
                                                <label for="relatorio-recibo-descricao" class="form-label"><i class="fa fa-edit"></i> Referenta a</label>
                                                <input type="text" id="relatorio-recibo-descricao" class="form-control" placeholder="Descrição do recibo">
                                            </div>
                                        </div>
                                        <div class="col-12 mt-5">
                                            <button class="btn btn-success form-control" id="relatorio-recibo-btn" type="button"><div class="i fa fa-file-pdf"></div> Imprimir recibo</button>
                                            <div class="alert alert-danger mt-3 text-center p-1 d-none" id="relatorio-recibo-error"></div>
                                            <div class="loading-print mt-3 mb-2 p-2 text-center d-none"><img src="public/img/load.gif" alt="Carregando..." width="10%"></div>
                                        </div>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                </div>
                
            </aside>

        </div>
    </section>

    <!-- MODALS -->

    <!-- MODAL SECOES -->
    <div class="modal" tabindex="-1" id="modal_secao">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">Adicionar seção</div>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="modal_secao-id">
                    <div class="form-group">
                        <label for="modal_secao-nome" class="form-label">Seção</label>
                        <input type="text" id="modal_secao-nome" class="form-control" placeholder="Seção">
                    </div>
                    <div class="alert alert-danger mt-3 text-center p-1 d-none" id="modal_secao-error"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"><i class="fa fa-trash"></i> Fechar</button>
                    <button class="btn btn-success" id="btn-add-secao"><i class="fa fa-save"></i> Salvar</button>
                    <div class="d-none alert alert-danger" id="modal_secao-error"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL CATEGORIAS -->
    <div class="modal" tabindex="-1" id="modal_categoria">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">Adicionar categoria</div>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="modal_categoria-id">
                    <div class="row">
                        <div class="form-group">
                            <label for="modal_categoria-secao-select" class="form-label">Seção</label>
                            <select id="modal_categoria-secao-select" class="form-control js-example-basic-single js-states" style="width: 100%;"></select>
                        </div>
                        <div class="form-group mt-3">
                            <label for="modal_categoria-nome" class="form-label">Categoria</label>
                            <input type="text" id="modal_categoria-nome" class="form-control" placeholder="Categoria">
                        </div>
                        <div class="alert alert-danger mt-4 text-center p-1 d-none" id="modal_categoria-error"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"><i class="fa fa-trash"></i> Fechar</button>
                    <button class="btn btn-success" id="btn-add-categoria"><i class="fa fa-save"></i> Salvar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL CORES -->
    <div class="modal" tabindex="-1" id="modal_cor">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">Adicionar cor</div>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="modal_cor-id">
                    <div class="form-group">
                        <label for="modal_cor-nome" class="form-label">Cor</label>
                        <input type="text" id="modal_cor-nome" class="form-control" placeholder="Cor de produto">
                    </div>
                    <div class="alert alert-danger mt-3 text-center p-1 d-none" id="modal_cor-error"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"><i class="fa fa-trash"></i> Fechar</button>
                    <button class="btn btn-success" id="btn-add-cor"><i class="fa fa-save"></i> Salvar</button>
                    <div class="d-none alert alert-danger" id="modal_cor-error"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL CRIAR CAIXA -->
    <div class="modal" tabindex="-1" id="modal_add_caixa">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title"><i class="fa fa-edit"></i> Adicionar ou alterar caixa</div>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="modal_add_caixa-id">
                    <div class="form-group">
                        <label for="modal_add_caixa-nome" class="mb-2">Nome do caixa</label>
                        <input type="text" class="form-control" id="modal_add_caixa-nome" placeholder="Nome">
                    </div>
                    <div class="form-group mt-2">
                        <label for="modal_add_caixa-descricao" class="mb-2">Descrição</label>
                        <input type="text" class="form-control" id="modal_add_caixa-descricao" placeholder="Descrição">
                    </div>
                    <input type="hidden" id="modal_add_caixa-entrada" value="0">
                    <input type="hidden" id="modal_add_caixa-saida" value="0">
                    <input type="hidden" id="modal_add_caixa-saldo" value="0">
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-12 m-0 p-0">
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal"><i class="fa fa-xmark"></i> Fechar</button>
                            <button class="btn btn-success form-btn mr-0 pr-0" type="button" id="save-modal_add_caixa"><i class="fa fa-save"></i> Salvar</button>
                        </div>
                        <div class="col-12">
                            <div class="alert alert-danger d-none mt-2 text-center" id="modal_add_caixa-error"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL DE VENDA DE PRODUTOS -->
    <div class="modal" tabindex="-1" id="modal_lancar_caixa">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">Venda de produto</div>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="modal_lancar_caixa-id" value="1">
                    <div class="form-group">
                        <label for="caixa_produto_search" class="mb-2"><i class="fa fa-search"></i> Pesquisar produto</label>
                        <input type="search" id="caixa_produto_search" data-bs-endpoint="produtos" data-bs-itemId="produto" class="form-control inpt-search" placeholder="Procurar produto(s)">
                    </div>
                    <div class="form-group mt-4">
                        <label for="modal_lancar_caixa-produto_id" class="mb-2"><i class="fa fa-cart-shopping"></i> Produto</label>
                        <select id="modal_lancar_caixa-produto_id" style="width: 100%;"></select>
                    </div>
                    <div class="form-group mt-4">
                        <label for="modal_lancar_caixa-forma_pagamento_id" class="mb-2"><i class="fa-solid fa-file-invoice-dollar"></i> Forma de pagamento</label>
                        <select id="modal_lancar_caixa-forma_pagamento_id" style="width: 100%;">
                            <option disabled selected>-- selecione a forma de pagamento --</option>
                        </select>
                    </div>
                    <div class="form-group mt-4">
                        <label for="modal_lancar_caixa-quantidade" class="mb-2"><i class="fa fa-edit"></i> Quantidade para venda <span id="caixa_produto_view_quantidade"></span></label>
                        <input type="number" class="form-control" id="modal_lancar_caixa-quantidade" placeholder="Qtd. do produto">
                    </div>
                    <div class="mt-4 text-white p-2 rounded" style="text-align: right !important;box-shadow: 1px 1px 1px 2.5px rgba(0,0,0,.12);">
                        <span class="text-black">Valor com desconto: <span class="fw-bold" id="caixa_valor_view"></span></span>
                        <input type="hidden" id="modal_lancar_caixa-valor">
                    </div>
                    <div class="alert alert-danger mt-2 p-1 text-center d-none" id="modal_lancar_caixa-error"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger mb-3" data-bs-dismiss="modal"><i class="fa fa-xmark"></i> Fechar</button>
                    <button class="btn btn-success form-btn mb-3" id="save-modal_lancar_caixa" type="button"><i class="fa-solid fa-cart-plus"></i> Vender</button>
                    <div class="d-none alert alert-danger mt-5 p-1 d-block" id="modal_lancar_caixa-error" style="margin-top: 100px !important;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL LANÇAR SAIDA NO CAIXA -->
    <div class="modal" tabindex="-1" id="modal_saida_caixa">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">Lançar saída no caixa</div>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="modal_saida_caixa-id">
                    <div class="form-group">
                        <label for="modal_saida_caixa-saida" class="form-label">Saída R$</label>
                        <input type="text" id="modal_saida_caixa-saida" class="form-control" placeholder="Saída">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"><i class="fa fa-xmark"></i> Fechar</button>
                    <button class="btn btn-success" id="btn-lancar-saida"><i class="fa fa-save"></i> Lançar saída</button>
                    <div class="d-none alert alert-danger" id="modal_saida_caixa-error"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL ERRORS HANDLER -->
    <div class="modal" tabindex="-1" id="modal_error">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title" id="modal_error-title"></div>
                </div>
                <div class="modal-body">
                    <div class="alert alert-danger form-control text-center p-2" id="model_error-content"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger-custom" data-bs-dismiss="modal"><i class="fa fa-xmark"></i> Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- <footer class="footer"><small><span class="bold">Mimos da tia Pi</span> por Daniel Victor Freire Feitosa all rights reserved <i class="fa fa-copyright"></i> 2024-2024</small></footer> -->
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script type="text/javascript" src="public/js/maskMoney.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.10/jquery.mask.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.0/js/plugins/buffer.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.0/js/plugins/filetype.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.0/js/plugins/piexif.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.0/js/plugins/sortable.min.js" type="text/javascript"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script> -->
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.0/js/fileinput.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.0/js/locales/LANG.js"></script>
    <script type="module">
        
        import { Api } from './public/js/Api.class.js'

        window.addEventListener('load', async () => {

            if(document.readyState == 'complete'){

                // CHECK IF ANY STRING IS EMPTY
                String.prototype.empty = function(){

                    var str = this;

                    if(!str || !str.length) return true;

                    return false;

                }

                // IN ARRAY FUNCTION
                Array.prototype.in_array = function(needle){

                    var haystack = this;

                    return Object.values(haystack).includes(needle)

                }

                // CHECK LAST WINDOW FROM LOCAL STORAGE
                if(!localStorage.getItem('current_dashboard')){
                    localStorage.setItem('current_dashboard', 'clientes');
                }

                if(!localStorage.getItem('current_caixa') || (parseInt(localStorage.getItem('current_caixa')) == NaN || (parseInt(localStorage.getItem('current_caixa') <= 0)))){
                    localStorage.setItem('current_caixa', 1);
                }

                // CALCULATE PERCENTUAL DISCOUNT TO REAL VALUE
                function setDesconto(input_id){

                    let field = getCurrentDashboard().includes('contas') ? 'valor' : 'preco';
                    let item_id = input_id.split('-')[0]
                    let span = document.querySelector(`#desconto-${item_id}`);

                    let valor = document.querySelector(`#${item_id}-${field}`).value;
                    let desconto = document.querySelector(`#${item_id}-desconto`).value;
                    let desconto_real = 0;

                    if(valor.empty()){
                        return;
                    }

                    if(parseInt(desconto) == NaN || parseInt(valor) == NaN){
                        return;
                    }

                    if(desconto && valor){
                        if(parseFloat(desconto) <= 0){
                            desconto_real = desconto;
                        }else{
                            desconto_real = (parseFloat(valor) * (parseFloat(desconto)/100));
                        }
                    }

                    span.innerHTML = `( ${formatMoney(desconto_real)} )`;

                }

                [...document.querySelectorAll('input[type="number"]')].forEach((inpt) => {

                    if(inpt.id.includes('valor') || inpt.id.includes('preco') || inpt.id.includes('valor_pago')){
                    
                        if(!getCurrentDashboard().includes('relatorios')){
                            $(`#${inpt.id}`).change((e) => { setDesconto(inpt.id) })
                        }

                        $(inpt).maskMoney();
                        $(inpt).attr('type', 'text');
                    
                    }else if(inpt.id.includes('desconto')){
                        //$(inpt).maskMoney();
                        inpt.addEventListener('input', () => { setDesconto(inpt.id) });
                    }else if(inpt.id.includes('quantidade')){
                        $(inpt).maskMoney();
                        $(inpt).attr('type', 'text');
                    }

                });

                const socket = io(); // SOCKET
                const app_config = {
                    loading : {
                        timeout : 3000
                    },
                    errors : {
                        timeout : 5000
                    },
                    images : {
                        width : '30px',
                        height : '30px'
                    },
                    verbose : true
                };

                // EVENTO DO LEITOR DE CODIGO DE BARRAS
                socket.on('codigo_barras', (codigo_barras) => {

                    if(getCurrentDashboard() == 'produtos'){
                     
                        document.querySelector('#produto-codigo_barras').value = codigo_barras;

                    }else if(getCurrentDashboard() == 'caixa'){

                        document.querySelector('#caixa_produto_search').value = codigo_barras;

                        let event = document.createEvent('Event');
                        event.initEvent('input', true, false);

                        document.querySelector('#caixa_produto_search').dispatchEvent(event);

                    }else if(getCurrentDashboard() == 'estoque_produto_final'){

                        document.querySelector('#estoque_produto_final_search').value = codigo_barras;

                        let event = document.createEvent('Event');
                        event.initEvent('input', true, false);

                        document.querySelector('#caixa_produto_search').dispatchEvent(event);

                    }

                });

                // DASHBOARD STUFF
                const dashboardLoadEvent = new CustomEvent('load_dash', { detail : { dashboard_name : null } }); // LOAD APP WINDOW EVENT
                const currentDashboard = localStorage.getItem('current_dashboard'); // CURRENT APP WINDOW

                const csrf_token = document.querySelector('meta[name="csrf-token"]').getAttribute('content'); // CSRF TOKEN IF REQUIRED

                // API INSTANCE
                const api = new Api({
                    csrf_token : csrf_token,
                    endpoint : '/api/v1'
                });

                let buttonsChecked = [];
                let etiquetas_obj = [];

                // GET ACTIVE PDVS AND STORAGE FIRTS PDV ID
                function loadCaixaStorage(){

                    try{

                        console.log(getCurrentCaixa())
                        
                        api.getData({ endpoint : { path : 'caixa', id : 1 } })
                            .then(resp => resp.json())
                            .then(results => {
                                if(results.error){
                                    localStorage.setItem('current_caixa', 1);
                                    show('caixa-select-error', results.msg, app_config.verbose)
                                    return
                                }else{
    
                                    results = results.results;

                                    console.log(results)
    
                                    for(let i = 0; i < results.length; i++){
                                        if(parseInt(results[i].id) != NaN || parseInt(results[i].id) > 0){
                                            localStorage.setItem('current_caixa', parseInt(results[i].id))
                                            break
                                        }else{
                                            localStorage.setItem('current_caixa', 1);
                                            break;
                                        }
                                    }
    
                                }
                            })
                            .catch(err => {
                                localStorage.setItem('current_caixa', 1);
                                show('caixa-select-error', err.toString(), app_config.verbose)
                                app_config.verbose ? console.error(err) : '';
                            })
                    }catch(err){
                        show('caixa-select-error', err.toString(), app_config.verbose)
                        localStorage.setItem('current_caixa', 1);
                        app_config.verbose ? console.error(err) : '';
                    }

                }

                loadCaixaStorage();

                // UTILS FUNCTIONS
                function initFieldsMasks(){

                    // MASK FOR CNPJ AND CPF FIEDLS
                    [...document.querySelectorAll('input[placeholder="CPF/CNPJ"]')].forEach(el => {
                                        
                        let item_id = el.id

                        var options = {
                            onKeyPress: function (cpf, ev, el, op) {
                                var masks = ['000.000.000-000', '00.000.000/0000-00'];
                                $('#' + item_id).mask((cpf.length > 14) ? masks[1] : masks[0], op);
                            }
                        }

                        $('#' + item_id).length > 11 ? $('#' + item_id).mask('00.000.000/0000-00', options) : $('#' + item_id).mask('000.000.000-00#', options);

                    });

                    // MAS FOR CELLPHONE
                    [...document.querySelectorAll('input[placeholder="Telefone fixo ou celular"],input[placeholder="Whatsapp"]')].forEach(el => {
                        
                        let item_id = el.id

                        var options = {
                            onKeyPress: function (phone, ev, el, op) {
                                var masks = ['(00) 0 0000-0000'];
                                $('#' + item_id).mask(masks[0], op);
                            }
                        }

                        $('#' + item_id).mask('(00) 0 0000-0000', options);

                    });
                }

                // TRANSLATE FIELD FILE PREVIEW AND OTHERS TEXTS
                function translate(){
                    [...document.querySelectorAll('.hidden-xs')].forEach((el) => { 
                        const replaces = {'Remove' : 'Remover', 'Cancel' : 'Cancelar', 'Upload' : 'Carregar arquivo', 'Browse …' : 'Procurar', 'Drag & drop files here ...' : 'Arraste e solte arquivos aqui ...'};
                        if(replaces[el.textContent] != undefined){
                            el.textContent = replaces[el.textContent];
                        }
                    })
                    $('.file-caption-name.form-control.kv-fileinput-caption').attr('placeholder', 'Selcionar arquivo ...');
                    $('.file-drop-zone-title').text('Arraste e solte algum arquivo aqui ...');
                }

                function showModalError(title, content){

                    $('#modal_error-title').html(`<i class="fa fa-exclamation-triangle"></i> ${title}`)
                    $('#model_error-content').text(content);
                    
                    $('#modal_error').modal('show');

                }

                // SET LISTENER TO ANY ELEMENTS
                function setListener(elements, eventName, callback){
                    elements.forEach(element => {
                        element.addEventListener(eventName, callback);
                    })
                }

                // SHOW AN ELEMENT BY ID WITH TIMEOUT TO HIDDEN
                function show(element_id, text, timeout = 0){

                    const element = document.querySelector(`#${element_id}`);

                    element.innerHTML = text;
                    element.classList.remove('d-none');

                    if(timeout){
                        setTimeout(() => {
                            hide(element_id)
                        }, timeout)
                    }

                }

                // HIDE AND ELEMENT BY ID
                function hide(element_id){
                    document.querySelector(`#${element_id}`).classList.add('d-none');
                }

                // SHOW AN ELEMENT (USED TO CONTROL DASHBOARD FLOW)
                function showElem(elements){
                    elements.forEach(el => {
                        $(el).show();
                        //el.classList.remove('d-none')
                    })
                }
    
                // HIDE AN ELEMENT (USED TO CONTROL DASHBOARD FLOW)
                function hideElem(elements){
                    elements.forEach(el => {
                        $(el).hide();
                        //el.classList.add('d-none')
                    })
                }
    
                // LOAD ANY DASHBOARD PAGE
                function loadDashboardPage(page_name){
                    document.querySelector('.load-window').classList.add('d-none');
                    dashboardLoadEvent.detail.dashboard_name = page_name;
                    document.dispatchEvent(dashboardLoadEvent);
                }
    
                // SHOW ANY DASHBOARD PAGE
                function showDashboardPage(page_name){
                    hideElem([...document.querySelectorAll('.app-window')]);
                    showElem([...document.querySelectorAll('#' + page_name)]);
                    localStorage.setItem('current_dashboard', page_name);
                }

                // FORMAT MONEY BRL
                function formatMoney(value){
                    return `R$ ${parseFloat(value).toFixed(2).replace('.', ',')}`;
                }

                // FORMAT PERCENT
                function formatPercent(value){
                    if(value == 'Não registrado'){
                        return '0%';
                    }
                    let percent = parseFloat(value).toFixed(2).split('.')[1] == '00' ? parseInt(value) : parseFloat(value).toFixed(2);
                    return `${percent}%`;
                }

                // FORMAT UNIT IN METEERS
                function formatUnity(value){
                    return `${value}m`;
                }

                // LOAD TABLE WITH ANY DATA RESULTS
                function loadTable(results, params, callback = null){ // { table_name : 'x', table_columns : ['id', 'nome'] }

                    /*if(!results){
                        console.warn('not found results to load table', results);
                        return null;
                    }*/

                    if(!params.table_name){
                        app_config.verbose ? console.error('Not found table_name in params [loadTable] => ', params) : '';
                        return null;
                    }

                    if(!params.table_columns){
                        app_config.verbose ? console.error('Not found table_columns in params [loadTable] => ', params) : '';
                        return null;
                    }

                    let data_html = '';
                    let table_name = params.table_name;
                    let table_columns = params.table_columns;
                    let window_name = '';
                    let item_name = params.item_name;

                    if(table_name.includes('produtos')){
                        table_columns.push('quantidade')
                    }else if(table_name.includes('estoque_produto_final') || table_name.includes('estoque_material_producao')){
                        table_columns.push('estoque')
                    }
                    
                    try{
                        window_name = params.table_name.split('-')[0];
                    }catch(err){
                        throw err;
                    }

                    if(!results.length){

                        data_html = '<tr>' + '\n';
                        data_html += `   <td colspan="100%">Nada encontrado</td>` + '\n';
                        data_html += '</tr>' + '\n';

                        document.querySelector('#' + table_name).innerHTML = data_html;
                        
                        return false;

                    }
                    
                    if(getCurrentDashboard() == 'produtos'){

                        const codigos_barras = [];
                        const produtos_nomes = [];

                        results.forEach(result => { codigos_barras.push(result.codigo_barras); produtos_nomes.push(result.nome) });

                        let index = 0, newArr = [], newArrNome = [];
                        let length = codigos_barras.length; // to get length of array
                        
                        function findDuplicates(arr, arrNome) {
                            for (let i = 0; i < length - 1; i++) {
                                for (let j = i + 1; j < length; j++) {
                                    if (arr[i] === arr[j]) {
                                        newArr[index] = arr[i];
                                        newArrNome[index] = arrNome[i];
                                        index++;
                                    }
                                }
                            }
                            return newArr.toString() + ' | Produto: ' + newArrNome.toString();
                        }

                        function hasDuplicates(array) {
                            return (new Set(array)).size !== array.length;
                        }

                        if(hasDuplicates(codigos_barras)){
                            showModalError('Alerta produtos com códigos de barras iguais', `Existe mais de um produto cadastrado com esse código de barras: ${findDuplicates(codigos_barras, produtos_nomes)}`);
                        }
                        
                    }

                    function checkEmptyString(value=null){
                        
                        if(!value || value == '' || value == ' ' || value == null || value == undefined){
                            value = 'Não registrado';
                        }

                        return value;
                    }
                    
                    function checkEmptyNumber(value=null){

                        if(!value || typeof value != 'number' || parseInt(value) == NaN || parseFloat(value) <= 0){
                            value = 'Não registrado';
                        }

                        return value;
                    }

                    function checkKey(obj=null, key=null){
                        if(typeof obj == 'object'){
                            return Object.keys(obj).includes(key);
                        }else{
                            return false;
                        }
                    }

                    results.forEach((data, i) => {

                        let tds = '';

                        data_html += `<tr class="${item_name}-item" data-bs-id="${data.id}">` + '\n';

                        table_columns.forEach((column, c_index)  => {

                            //app_config.verbose ? console.log(column, c_index) : '';

                            data[column] = checkEmptyString(data[column]);

                            switch(column){

                                case 'id':

                                    if(getCurrentDashboard() == 'etiquetas'){
                                        console.log(buttonsChecked);
                                        if(buttonsChecked.includes(parseInt(data.id))){

                                            let prd_id = parseInt(data.id);

                                            etiquetas_obj.forEach((etiqueta) => {
                                                if(prd_id == parseInt(etiqueta.produto)){
                                                    tds += `<td><input type="checkbox" class="btn-check btn-add-etiquetas" data-bs-id="${etiqueta.produto}" id="btncheck${data[column]}" autocomplete="off" checked="true"><label class="btn btn-outline-primary" for="btncheck${data[column]}">Selecionar <input type="number" min="1" class="form-control text-center p-0 m-0 btn-quantidade-etiquetas" data-bs-id="${etiqueta.produto}" placeholder="Qtd." value="${etiqueta.quantidade}"></label></td>` + '\n';
                                                }
                                            });

                                        }else{
                                            tds += `<td><input type="checkbox" class="btn-check btn-add-etiquetas" data-bs-id="${data.id}" id="btncheck${data[column]}" autocomplete="off"><label class="btn btn-outline-primary" for="btncheck${data[column]}">Selecionar <input type="number" min="1" class="form-control text-center p-0 m-0 btn-quantidade-etiquetas" data-bs-id="${data.id}" placeholder="Qtd." value="1" disabled></label></td>` + '\n';
                                        }
                                    }else{
                                        tds += `<td>${i+1}</td>` + '\n';
                                    }

                                break;

                                case 'endereco':

                                    if(!checkKey(data, 'ponto_referencia')){
                                        data['ponto_referencia'] = '';
                                    }

                                    tds += `<td>${data[column]}${data['ponto_referencia'] ? ', ' + data['ponto_referencia'] : ''}</td>` + '\n';
                                break;

                                case 'instagram':
                                    tds += `<td><a class="link" target="_blank" href="https://instagram.com/${data[column]}">@${data[column]}</td>` + '\n';
                                break;

                                case 'categoria':
                                    if(!checkKey(data, 'produtos_categoria')){
                                        data['produtos_categoria'].nome = 'Não associado';
                                    }
                                    tds += `<td>${data['produtos_categoria'].nome}</td>` + '\n';
                                break;

                                case 'secao':
                                    if(!checkKey(data, 'produtos_seco')){
                                        data['produtos_seco'].nome = 'Não associado';
                                    }
                                    tds += `<td>${data['produtos_seco'].nome}</td>` + '\n';
                                break;
                                
                                case 'cor':
                                    if(!checkKey(data, 'produtos_cor')){
                                        data['produtos_cor'].nome = 'Não associado';
                                    }
                                    tds += `<td>${data['produtos_cor'].nome}</td>` + '\n';
                                break

                                case 'datecreated':

                                    let datecreated = new Date(data[column]).toLocaleString();
                                    tds += `<td>${datecreated}</td>` + '\n';

                                break;

                                // campos nao usados
                                case 'codigo_barras':
                                case 'ponto_referencia':

                                break;

                                case 'produto':
                                    if(!checkKey(data, 'produto_nome')){
                                        data['produto_nome'].nome = 'Não associado';
                                    }
                                    tds += `<td>${data['produto_nome'].nome}</td>` + '\n';
                                break;

                                case 'quantidade':
                                    if(getCurrentDashboard() == 'caixa'){
                                        tds += `<td>${data[column]}</td>` + '\n';
                                    }else{
                                        if(data['estoque_produto_final'] == null){
                                            data['estoque_produto_final'] = {};
                                            data['estoque_produto_final'].estoque = 'Qtd. idisponível';
                                        }else{
                                            tds += `<td>${data['estoque_produto_final'].estoque}</td>` + '\n';
                                        }
                                    }
                                break;

                                case 'estoque':
                                
                                    let _estoque = 0;

                                    if(!checkKey(data, 'entrada')){
                                        data['entrada'] = null;
                                    }

                                    if(!checkKey(data, 'saida')){
                                        data['entrada'] = null;
                                    }

                                    if(!checkEmptyNumber(data['entrada'])){
                                        data['entrada'] = 'Não disponível';
                                    }

                                    if(!checkEmptyNumber(data['saida'])){
                                        data['saida'] = 'Não disponível';
                                    }

                                    if(data['entrada'] == 'Não disponível' && data['saida'] == 'Não disponível'){
                                        _estoque = 'Não disponível';
                                    }else{
                                        _estoque = parseInt(data['entrada']) - parseInt(data['saida']);
                                    }

                                    tds += `<td>${_estoque}</td>` + '\n';
                                
                                break;

                                case 'valor':
                                case 'valor_pago':
                                case 'preco':
                                    data[column] = checkEmptyNumber(data[column]);
                                    tds += `<td>${parseFloat(data[column]) != NaN ? formatMoney(data[column]) : 'Não disponível'}</td>` + '\n';
                                break;

                                case 'desconto':
                                    tds += `<td>${formatPercent(data[column])}</td>` + '\n';
                                break;

                                case 'produto_id':
                                    if(!checkKey(data, 'produto')){
                                        data['produto'].estoque = 'Nome idisponível';
                                    }
                                    tds += `<td>${data['produto'].nome}</td>` + '\n';
                                break;

                                case 'caixa_id':
                                    if(!checkKey(data, 'caixa')){
                                        data['caixa'].nome = 'Nome idisponível';
                                    }
                                    tds += `<td>${data['caixa'].nome}</td>` + '\n';
                                break;

                                case 'forma_pagamento_id':
                                    if(!checkKey(data, 'forma_pagamento_id')){
                                        data['forma_pagamento_id'].nome = 'Forma de pagamento idisponível';
                                    }
                                    tds += `<td>${data['formas_pagamento'].nome}</td>` + '\n';
                                break;

                                case 'fornecedor_id':
                                    if(!checkKey(data, 'fornecedore')){
                                        data['fornecedore'].nome = 'Não associado';
                                    }
                                    tds += `<td>${data['fornecedore'].nome}</td>` + '\n';
                                break;

                                case 'forma_pagamento':
                                    if(!checkKey(data, 'formas_pagamento')){
                                        data['formas_pagamento'].nome = 'Forma de pagamento indisponível';
                                    }
                                    tds += `<td>${data['formas_pagamento'].nome}</td>` + '\n';
                                break;

                                case 'unidade':
                                    tds += `<td>${formatUnity(data[column])}</td>` + '\n';
                                break;

                                case 'cliente_id':
                                    if(!checkKey(data, 'cliente')){
                                        data['cliente'].nome = 'Nome do cliente não registrado';
                                    }
                                    tds += `<td>${data['cliente'].nome}</td>` + '\n';
                                break;

                                case 'especificacao':
                                    if(getCurrentDashboard() != 'estoque_material_producao'){
                                        if(!checkKey(data, 'produto_nome')){
                                            data['produto_nome'].descricao = 'Descrição vazia';
                                        }else if(!checkEmptyString(data['produto_name'])){
                                            data['produto_nome'].descricao = 'Descrição vazia';
                                        }
                                        tds += `<td>${data['produto_nome'].descricao}</td>` + '\n';
                                    }else{
                                        tds += `<td>${data[column]}</td>` + '\n';
                                    }
                                break;

                                case 'pago':
                                    tds += `<td class="${data[column] == true ? 'text-success' : 'text-danger'}">${data[column] == true ? 'PAGO' : 'NÃO PAGO'}</td>` + '\n';
                                break;

                                case 'foto':
                                    if(!data[column] || data[column] == '' || data[column] == null){
                                        app_config.verbose ? console.log('[+] Nenhuma imagem foi carregada para o registro substituido automaticamente') : '';
                                        data[column] = 'defaultProduct.png';
                                    }else if(!['jpg', 'png', 'jpeg'].includes(data[column].split('.')[data[column].split('.').length-1])){
                                        app_config.verbose ? console.warn(`[x] Tentativa de upload de shell ou bypass de extenção detectado no aqruivo -> ${data[column]} substituido automaticamente`) : '';
                                        data[column] = 'defaultProduct.png';
                                    }else if(data[column].includes('/') || data[column].includes('\\') || data[column].includes('..') || data[column].includes('../') || data[column].includes('..\\')){
                                        app_config.verbose ? console.warn(`[x] Possível LFI detectado no arquivo -> ${data[column]} substituido automaticamente`) : '';
                                        data[column] = 'defaultProduct.png';
                                    }
                                    tds += `<td><img src="public/files/${data[column]}" width="${app_config.images.width}" height="${app_config.images.height}" style="border-radius:4px;padding:0px !important;margin: 0px !important;"></td>` + '\n';
                                break;

                                default:
                                    tds += `<td>${data[column]}</td>` + '\n';
                                break;


                            }

                        });
    
                        data_html += tds;
    
                        data_html += `</tr>` + '\n';

                    });

                    document.querySelector('#' + table_name).innerHTML = data_html;

                    if(getCurrentDashboard() != 'etiquetas'){

                        setListener([...document.querySelectorAll(`.${item_name}-item`)], 'click', e => {
    
                            let item_id = e.currentTarget.getAttribute('data-bs-id');
    
                            results.forEach(data => {

                                app_config.verbose ? console.log(data) : '';
    
                                if(parseInt(data['id']) == parseInt(item_id)){
    
                                    table_columns.forEach(column => {

                                        if(column == 'pago'){
                                            if(data[column] == true){
                                                alert('O título já foi pago');
                                                document.location.reload()
                                            }
                                        }
    
                                        switch(column){
                                            case 'produto_nome':
                                                column = 'produto';
                                            break;
                                        }
    
                                        if(column != 'id' && column != 'datecreated' && column != 'estoque' && column != 'codigo_barras' && column != 'valor_pago' && column != 'pago' && column != 'usuario'){
                                            try{
                                                
                                                
                                                //app_config.verbose ? console.log(`#${item_name}-${column}`) : '';

                                                let field_form = document.querySelector(`#${item_name}-${column}`);
                                                let field_type = field_form.tagName;
    
                                                if(column == 'quantidade'){
                                                    field_form.setAttribute('disabled', true);
                                                }
    
                                                if(field_type == 'SELECT'){
                                                    field_form.value = [data[column]];
                                                    $(field_form).trigger('change');
                                                }else{
                                                    if(column.includes('preco') || column.includes('valor') || column.includes('valor_pago')){
                                                        field_form.value = parseFloat(data[column]).toFixed(2);
                                                    }else if(column.includes('entrada') || column.includes('saida')){
                                                        field_form.value = 0;
                                                    }else if(column == 'quantidade'){
                                                        field_form.value = data['estoque_produto_final'] != null ? data['estoque_produto_final'].estoque : 0;
                                                    }else if(column == 'foto' && getCurrentDashboard() == 'produtos'){

                                                        const fetchImage = async url => {
                                                            
                                                            const response = await fetch(`public/files/${url}`);
                                                            const blob = await response.blob();

                                                            app_config.verbose ? console.log(blob) : '';

                                                            return blob

                                                        }

                                                        const loadInputImage = async url => {

                                                            const photoContent = await fetchImage(url);
                                                            const productPhoto = new File([photoContent], url, {
                                                                type : photoContent.type,
                                                                lastModified : new Date(),
                                                            });

                                                            const dataTransfer = new DataTransfer();
                                                            dataTransfer.items.add(productPhoto);

                                                            document.querySelector('#prd-foto').files = dataTransfer.files;
                                                            $('#prd-foto').trigger('change');

                                                        }

                                                        loadInputImage(data[column]);

                                                    }else{
                                                        field_form.value = data[column]
                                                    }
                                                }
    
                                            }catch(err){
                                                app_config.verbose ? console.error(err, item_name, column) : ''
                                            }
                                        }
    
                                    })
                                    
                                    if(!getCurrentDashboard().includes('estoque_produto_final')){
                                        document.querySelector(`#del-${item_name}`).removeAttribute('disabled');
                                    }
                                    document.querySelector(`#${item_name}-id`).value = data['id'];
                                }
    
                            });
    
                        });
                    
                    }else{

                        [...document.querySelectorAll('.btn-quantidade-etiquetas')].forEach((btn) => { 
                            if(buttonsChecked.includes(parseInt(btn.getAttribute('data-bs-id')))){
                                btn.removeAttribute('disabled');
                            }
                        });


                        // BOTAO DE SELECIONAR TUDO NAS ETIQUETAS
                        document.querySelector('#etiquetas-btn-select-all').addEventListener('click', (e) => {

                            let isChecked = e.currentTarget.checked;

                            [...document.querySelectorAll('.btn-add-etiquetas')].forEach(btnCheck => {

                                $(btnCheck).click();

                                if(isChecked){
                                    [...document.querySelectorAll('.btn-quantidade-etiquetas')].forEach((btn) => { btn.removeAttribute('disabled') });
                                }else{
                                    document.querySelector('#etiquetas-produtos').value = '';
                                    document.querySelector('#etiquetas-ids').value = '';
                                    [...document.querySelectorAll('.btn-quantidade-etiquetas')].forEach((btn) => { btn.setAttribute('disabled', true); });
                                    etiquetas_obj = [];
                                    buttonsChecked = [];
                                }
                            
                            })

                        });

                        /*[...document.querySelectorAll('.btn-check')].forEach((btnCheck) => {

                            document.querySelector(`.btn-quantidade-etiquetas[data-bs-id="${btnCheck.getAttribute('data-bs-id')}"]`).removeAttribute('disabled');

                            let hiddenField = document.querySelector('#etiquetas-ids');

                            if(hiddenField.value.includes(`"produto":${btnCheck.getAttribute('data-bs-id')}`)){
                                $(btnCheck).click();
                                btnCheck.checked = true;
                                console.log('aqui')
                                //document.querySelector(`.btn-quantidade-etiquetas[data-bs-id="${btnCheck.getAttribute('data-bs-id')}"]`).removeAttribute('disabled');
                                
                            }

                        });*/

                        setListener([...document.querySelectorAll('.btn-quantidade-etiquetas')], 'input', e => {

                            let produto_id = e.currentTarget.getAttribute('data-bs-id');
                            let quantidade = e.currentTarget.value;
                            let nome = null;
                            let quantidade_atual = null;
                            let field = document.querySelector('#etiquetas-produtos');
                            let hiddenField = document.querySelector('#etiquetas-ids');

                            etiquetas_obj.map(etiqueta => {

                                if(parseInt(etiqueta.produto) == parseInt(produto_id)){
                                    nome = etiqueta.nome;
                                    console.log('INT quantidade', parseInt(quantidade))
                                    quantidade = isNaN(parseInt(quantidade)) || quantidade == '' || quantidade == null || quantidade == ' ' || quantidade == undefined || quantidade.toString().empty() ? 1 : parseInt(quantidade);
                                    etiqueta.quantidade = quantidade;
                                    return etiqueta;
                                }

                            });
                            
                            if(!field.value.empty()){
                                if(field.value.split(`${nome}x`)[1].includes(',')){
                                    quantidade_atual = field.value.split(`${nome}x`)[1].split(',')[0];
                                }else{
                                    quantidade_atual = field.value.split(`${nome}x`)[1].split('')[0];
                                }
                            }else{
                                quantidade_atual = field.value.split(`${nome}x`)[1];
                            }

                            console.log('quantidade atual', quantidade_atual);

                            if(!field.value.empty()){
                                field.value = field.value.replaceAll(`${nome}x${quantidade_atual}`, `${nome}x${quantidade}`);
                            }
                        });

                        setListener([...document.querySelectorAll('.btn-add-etiquetas')], 'click', (e) => {
                            
                            let produto_id = e.currentTarget.getAttribute('data-bs-id');
                            let hiddenField = document.querySelector('#etiquetas-ids');
                            let field = document.querySelector('#etiquetas-produtos');
                            let isChecked = e.currentTarget.checked;
                            let btnId = e.id;
                            let quantidade = document.querySelector(`.btn-quantidade-etiquetas[data-bs-id="${produto_id}"]`);
                            
                            api.getData({ endpoint : { path : 'produtos', id : produto_id } })
                                .then(resp => resp.json())
                                .then(results => {

                                    if(results.error){
                                        app_config.verbose ? console.error(results.error) : '';
                                    }else{

                                        let produto = results.results;
                                        let quantidade_atual = document.querySelector(`.btn-quantidade-etiquetas[data-bs-id="${produto.id}"]`).value;
                                        
                                        if(isChecked){

                                            if(!buttonsChecked.includes(parseInt(produto.id))){
                                                etiquetas_obj.push({ produto : produto.id, quantidade : parseInt(quantidade.value), nome : produto.nome });
                                                hiddenField.value = JSON.stringify(etiquetas_obj);
                                                buttonsChecked.push(parseInt(produto.id));
                                            }

                                            if(field.value.empty()){
                                                field.value = `${produto.nome}x${quantidade.value}`;
                                            }else{
                                                field.value = `${field.value},${produto.nome}x${quantidade.value}`;
                                                //field.value = !field.value.includes(produto.nome) ? `${field.value},${produto.nome}` : field.value;
                                            }

                                            document.querySelector(`.btn-quantidade-etiquetas[data-bs-id="${produto.id}"]`).removeAttribute('disabled');

                                        }else{

                                            let obj_index = -1;
                                            let etiquetas_obj_string = etiquetas_obj.map(JSON.stringify);
                                            let filtered_etiquetas_obj = etiquetas_obj.find((item, i) => {
                                                if(item.nome == produto.nome){
                                                    obj_index = i;
                                                    return item;
                                                }
                                            })
                                            
                                            console.log(obj_index);

                                            etiquetas_obj = etiquetas_obj.map((prd, index) => {
                                                if(parseInt(obj_index) != parseInt(index)){
                                                    return prd;
                                                }
                                            });

                                            let etiquetas_obj_filtered = [];
                                            let etiquetas_obj_filtered_index = 0;

                                            let buttonChecked_filtered = [];
                                            let buttonChecked_filtered_index = 0;

                                            etiquetas_obj.filter((value) => {
                                                if(value || value != undefined || typeof value == 'object'){
                                                    etiquetas_obj_filtered[etiquetas_obj_filtered_index] = value;
                                                    etiquetas_obj_filtered_index += 1;
                                                }
                                            });

                                            etiquetas_obj = etiquetas_obj_filtered;

                                            buttonsChecked = buttonsChecked.map((value, index) => {
                                                if(parseInt(obj_index) != parseInt(index)){
                                                    buttonChecked_filtered[buttonChecked_filtered_index] = value;
                                                    buttonChecked_filtered_index += 1;
                                                }
                                            })

                                            buttonsChecked = buttonChecked_filtered;
                                            
                                            hiddenField.value = JSON.stringify(etiquetas_obj);
                                            if(field.value.includes(',')){
                                                field.value.split(',').forEach((f) => {
                                                    if(f == field.value.split(',')[0]){
                                                        field.value = field.value.replaceAll(`${produto.nome}x${quantidade.value},`, '');
                                                    }else{
                                                        field.value = field.value.replaceAll(`,${produto.nome}x${quantidade.value}`, '');
                                                    }
                                                })
                                            }else{
                                                field.value = field.value.replaceAll(`${produto.nome}x${quantidade.value}`, '');
                                            }
                                            
                                            if(document.querySelector('#etiquetas-btn-select-all').checked){
                                                document.querySelector('#etiquetas-btn-select-all').checked = false;
                                            }

                                            document.querySelector(`.btn-quantidade-etiquetas[data-bs-id="${produto.id}"]`).setAttribute('disabled', true);

                                        }

                                        let allChecked = [...document.querySelectorAll('.btn-add-etiquetas')].map((btn) => {
                                            return parseInt(btn.getAttribute('data-bs-id'));
                                        });

                                        console.log(allChecked.sort(), buttonsChecked.sort(), etiquetas_obj);

                                        if(buttonsChecked.sort().toString() == allChecked.sort().toString()){
                                            document.querySelector('#etiquetas-btn-select-all').checked = true;
                                        }
                                    }

                                    })
                            .catch(err => {
                                app_config.verbose ? console.error(err) : '';
                            })

                        });

                    
                        //[...document.querySelectorAll('.btn-quantidade-etiquetas')].forEach((input) => { input.setAttribute('disabled', true) });
                    }

                    if(callback && typeof callback == 'function'){
                        callback();
                    }

                }

                // LOAD SELECT INPUT QUERYING ANY ROUTE
                function loadSelectOptions(name, params, callback = null){

                    api.getOptions(name)
                        .then(resp => resp.json())
                        .then(results => {

                            if(!results.error){
                                
                                results = results.results;

                                let placeholder = params.placeholder
                                let selectElementName = params.selectElementName;
                                let options = getCurrentDashboard() == 'relatorios-ordem_servico' ? `<option value="0" selected disabled>${placeholder}</option>` + '\n' : `<option value=0 selected disabled>${placeholder}</option>` + '\n';
                            
                                /*if(getCurrentCaixa() == 'caixa'){
                                    document.querySelector('#caixa_valor_view').innerHTML = '';
                                }*/

                                if(getCurrentDashboard() == 'contas_pagar' && results.length <= 0){
                                    showModalError('Erro ao carregar fornecedores', 'Você precisa adicionar fornecedores para usar o contas a pagar');
                                }else if(getCurrentDashboard() == 'contas_receber' && results.length <= 0){
                                    showModalError('Erro ao carregar clientes', 'Você precisa adicionar clientes para usar o contas a receber');
                                }

                                results.forEach((data) => {
                                    options += `<option value="${data.id}">${data.nome}</option>` + '\n'; 
                                });
                            
                                document.querySelector(`#${selectElementName}`).innerHTML = options;
                                
                                $(`#${selectElementName}`).select2({
                                    minimumResultsForSearch: 2,
                                    width : 'resolve'
                                });
                            
                                $(`#${selectElementName}`).on('select2:select', function (e) {
                                    
                                    var data = e.params.data;
                            
                                    if(data.selected && data.id && data.text && getCurrentDashboard() != 'caixa' && !getCurrentDashboard().includes('relatorio') && getCurrentDashboard() != 'estoque_produto_final' && !getCurrentDashboard().includes('contas')){
                                        try{
                                            document.querySelector(`#edit-${name}`).removeAttribute('disabled');
                                        }catch(err){
                                            app_config.verbose ? console.warn('Erro ao tentar remover atributo disabled', '\n', err) : ''
                                        }
                                    }else if(getCurrentDashboard() != 'caixa' && !getCurrentDashboard().includes('relatorio')){
                                        try{
                                            document.querySelector(`#edit-${name}`).setAttribute('disabled', true);
                                        }catch(err){
                                            app_config.verbose ? console.warn('Erro ao adicionar atributo ao campo', '\n', err) : '';
                                        }
                                    }
                            
                                });
                            
                                $(`#${selectElementName}`).on('change', function (e) {
                            
                                    let data = e.currentTarget;
                            
                                    if(data.value && name != 'caixa' && getCurrentDashboard() != 'caixa' && !getCurrentDashboard().includes('relatorio') && !getCurrentDashboard().includes('estoque_produto_final') && !getCurrentDashboard().includes('contas_pagar')){
                                        try{
                                            document.querySelector(`#edit-${name}`).removeAttribute('disabled');
                                        }catch(err){
                                            app_config.verbose ? console.warn('Erro ao tentar remover atributo disabled', '\n', err) : '';
                                        }
                                    }else if(data.value && name == 'caixa'){
                                        try{
                                            console.log(data);
                                            document.querySelector('#btn-abrir-caixa').removeAttribute('disabled');
                                            document.querySelector('#edit-caixa').removeAttribute('disabled');
                                            localStorage.setItem('current_caixa', data.value);
                                            getCaixaTemp(data.value);
                                        }catch(err){
                                            app_config.verbose ? console.warn('Erro ao remover atributo de campo', '\n', err) : '';
                                        }
                                    }
                            
                                });

                                if(typeof callback == 'function'){
                                    try{
                                        callback();
                                    }catch(err){
                                        app_config.verbose ? console.warn('Erro ao iniciar callback', '\n', err) : '';
                                    }
                                }

                            }else{
                                app_config.verbose ? console.error(results.msg) : '';
                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.log(name, params) : '';
                            app_config.verbose ? console.error(err) : '';
                        })

                }

                // LOAD SELECT OPTIONS IN FORMS
                function prepareOptions(results){

                    let produtos_categorias = [];
                    let produtos_secoes = [];
                    let produtos_cores = [];
                    let index_categorias = 0;
                    let index_secoes = 0;
                    let index_cores = 0;

                    results.forEach(result => {
                        
                        if(produtos_categorias.length == 0){
                            produtos_categorias.push(result.produtos_categoria);
                        }else{
                            if(produtos_categorias[index_categorias]['id'] != result.produtos_categoria.id){
                                produtos_categorias.push(result.produtos_categoria);
                                index_categorias += 1;
                            }
                        }

                        if(produtos_secoes.length == 0){
                            produtos_secoes.push(result.produtos_seco);
                        }else{
                            if(produtos_secoes[index_secoes]['id'] != result.produtos_seco.id){
                                produtos_secoes.push(result.produtos_seco);
                                index_secoes += 1;
                            }
                        }

                        if(produtos_cores.length == 0){
                            produtos_cores.push(result.produtos_cor);
                        }else{
                            if(produtos_cores[index_cores]['id'] != result.produtos_cor.id){
                                produtos_cores.push(result.produtos_cor);
                                index_cores += 1;
                            }
                        }
                    
                    });

                    return { produtos_secoes, produtos_categorias, produtos_cores }

                }

                // CLEAR ALL FORMS
                function clearForms(reloadOnly = false){

                    if(reloadOnly){
                        document.location.reload();
                        return;
                    }

                    let fields = [...document.querySelectorAll('.form-control')];
                    let selects = [...document.querySelectorAll('.form-select')];
                    let hiddenFields = [...document.querySelectorAll('input[type="hidden"]')];
                    let editButtons = [...document.querySelectorAll('.btn[data-bs-toggle="modal"]')];
                    
                    try{

                        if(getCurrentDashboard() == 'produtos'){
                            [...document.querySelectorAll('.btn.btn-default.btn-outline-secondary.fileinput-remove.fileinput-remove-button')].forEach((btn_reset_img) => {
                                $(btn_reset_img).trigger('click');
                                $('#prd-foto').trigger('change');
                            })
                        }

                        fields.forEach(field => { 
                            !field.classList.contains('btn') && !$(field).attr('disabled') ? field.value = '' : null; 
                            getCurrentDashboard() == 'relatorios-ordem_servico' ? field.setAttribute('disabled', true) : ''
                            getCurrentDashboard() == 'produtos' ? field.removeAttribute('disabled') : ''
                            getCurrentDashboard() == 'produtos' && field.id == 'produtos-quantidade' ? field.value = '' : ''
                            getCurrentDashboard().includes('contas') && field.id == 'contas_pagar-pago' ? field.value = false : null;
                            getCurrentDashboard().includes('contas') && field.id == 'contas_pagar-valor_pago' ? field.value = 0 : null;
                        });

                        hiddenFields.forEach(field => { field.value = null; });
                        
                        selects.forEach(select => { 
                            
                            select.value = "0";
                            
                            let event = document.createEvent('Event');
                            event.initEvent('change', true, false);

                            select.dispatchEvent(event);

                        });

                        [...document.querySelectorAll('.btn-danger.form-control')].forEach(delButton => { 
                            try{
                                if(delButton.id.includes('del')){
                                    delButton.setAttribute('disabled', true); 
                                }
                            }catch(err){
                                console.warn(err)
                            }
                        });

                        editButtons.forEach((btn) => { 
                            if(btn.id.includes('edit')){ 
                                try{
                                    btn.setAttribute('disabled', true)
                                }catch(err){
                                    console.warn(err)
                                }
                            }
                        });

                        document.querySelector('#caixa_valor_view').innerHTML = '';
                        document.querySelector('#desconto-produto').innerHTML = '';
                        document.querySelector('#desconto-contas_pagar').innerHTML = '';
                        document.querySelector('#desconto-contas_receber').innerHTML = '';

                    }catch(err){
                        app_config.verbose ? console.error(err) : '';
                    }

                }

                // PREPARE DATA TO ADD OR SAVE
                function prepareData(table_name, endpoint = null){

                    let data = {};

                    if(!endpoint){
                        endpoint = table_name;
                    }

                    [...document.querySelectorAll('input,select')].forEach(input =>{

                        if(input.getAttribute('id') && input.getAttribute('type') != 'file'){
                            if(input.getAttribute('id').includes(`${table_name}-`) && !input.getAttribute('id').includes('table')){
                            
                                let column_name = input.getAttribute('id').split('-')[1];
                                let column_data = input.value;

                                if(column_name == 'id' && endpoint.includes('caixa') && !endpoint.includes('saida')){
                                    column_name = 'caixa_id';
                                }

                                if(column_name == 'preco' || column_name == 'valor' || column_name == 'valor_pago'){

                                    if(input.getAttribute('type') == 'hidden'){
                                        column_data = parseFloat(column_data);
                                    }else{
                                        column_data = $(input).maskMoney('unmasked')[0];
                                    }
                                }

                                if(column_name == 'quantidade' && getCurrentDashboard() == 'produtos'){
                                    
                                    if(input.getAttribute('disabled')){
                                        column_data = parseInt(column_data) == NaN ? 0 : parseInt(column_data);
                                    }else{
                                        column_data = $(input).maskMoney('unmasked')[0];
    
                                        if(parseInt(column_data) == NaN){
                                            column_data = 0
                                        }else{
                                            column_data = parseInt(column_data);
                                        }
                                    }


                                }

                                if(column_name == 'desconto' && getCurrentDashboard() == 'produtos'){
                                    column_data = !column_data ? 0 : parseInt(column_data);
                                }

                                if(['secao', 'categoria', 'cor'].includes(column_name) && getCurrentDashboard() == 'produtos'){
                                    if(parseInt(column_data) == NaN){
                                        column_data = 0;
                                    }else{
                                        column_data = parseInt(column_data);
                                    }
                                }

                                if(column_name == 'contas_pagar' || column_name == 'contas_receber'){
                                    null
                                }else{
                                    data[column_name] = column_data;
                                }
                            
                            }
                        }

                    });

                    data.endpoint = endpoint;
                    data.form_data = data;

                    return data;

                }

                // PREPARE DATA TO DELETE
                function prepareDelete(params){

                    let data = {};

                    try{
                     
                        if(!document.querySelector(`#${params.field_name}-id`).value){
                            app_config.verbose ? console.error('id empty [prepareDelete()]', params) : '';
                        }

                        data.endpoint = params.endpoint;
                        data.id = document.querySelector(`#${params.field_name}-id`).value;

                        return data;

                    }catch(err){
                        console.warn(err);
                    }

                }
                
                // GET CURRENT DASHBOARD IN LOCAL STORAGE
                function getCurrentDashboard(){
                    return localStorage.getItem('current_dashboard');
                }

                // GET CURRENT CASHIER
                function getCurrentCaixa(){
                    if(!localStorage.getItem('current_caixa') || parseInt(localStorage.getItem('current_caixa')) == NaN || parseInt(localStorage.getItem('current_caixa')) <= 0){
                        localStorage.setItem('current_caixa', 1);
                    }
                    return localStorage.getItem('current_caixa');
                }

                // GET DATA FROM ANY ENDPOINT AND ANY APP WINDOW
                function getDataTables(item_id = null, item_name = '', load_options = false, item){

                    if(item_name.empty()){
                        app_config.verbose ? console.error('item_name cannot be empty', item_name) : '';
                        return;
                    }

                    api.getData({ endpoint : { path : getCurrentDashboard(), id : item_id } })
                        .then(resp => resp.json())
                        .then(results => {

                            let fields = results.fields;

                            if(results.error){
                                
                                loadTable([], {
                                    table_name : `${getCurrentDashboard()}-table`,
                                    table_columns : fields,
                                    item_name : item_name
                                });

                            }else{

                                results = results.results;

                                app_config.verbose ? console.log(getCurrentDashboard(), results) : '';

                                loadTable(results, {
                                    table_name : `${getCurrentDashboard()}-table`,
                                    table_columns : fields,
                                    item_name : item_name
                                });

                                if(getCurrentDashboard() == 'produtos'){
                                    loadSelectOptions('secao', {
                                        placeholder : '-- selecione a opção --',
                                        selectElementName : 'modal_categoria-secao-select'
                                    });
                                }

                                if(getCurrentDashboard() == 'estoque_produto_final' || getCurrentDashboard() == 'produtos' || getCurrentDashboard() == 'estoque_material_producao'){

                                    results.forEach((data) => {

                                        let estoque = 0;

                                        if(!data.estoque_produto_final && getCurrentDashboard() == 'produtos'){
                                            data = {estoque_produto_final : { estoque : 0 }}
                                        }

                                        if(getCurrentDashboard() == 'estoque_produto_final'){
                                            estoque = parseInt(data.produto_nome.estoque);
                                        }else{
                                            estoque = getCurrentDashboard() == 'estoque_material_producao' ? parseInt(data.entrada) - parseInt(data.saida) : parseInt(data.estoque_produto_final.estoque);
                                        }

                                        //console.log(estoque);

                                        // sinalizar se o estoque esta com menos de X unidades
                                        /*if(estoque && estoque < 4){
                                            alert(`Atenção restam apenas ${estoque} unidades do produto ${getCurrentDashboard() == 'estoque_produto_final' ? data.produto_nome.nome : data.nome}`);
                                        }*/

                                    })

                                }

                            }

                            if(load_options){

                                fields.forEach(field => {

                                    switch(field){

                                        case 'produto':

                                            loadSelectOptions('', {
                                                placeholder : '-- selecione a opção --',
                                                selectElementName : `${item_name}-${field}`
                                            });

                                        break;

                                        case 'categoria':
                                        case 'secao':
                                        case 'cor':

                                            loadSelectOptions(field, {
                                                placeholder : '-- selecione a opção --',
                                                selectElementName : `${item_name}-${field}`
                                            });

                                        break;

                                        case 'fornecedor_id':

                                            loadSelectOptions('fornecedores', {
                                                placeholder : '-- selecione a opção --',
                                                selectElementName : `${item_name}-${field}`
                                            });

                                        break;

                                        case 'cliente_id':

                                            loadSelectOptions('clientes', {
                                                placeholder : '-- selecione a opção --',
                                                selectElementName : `${item_name}-${field}`
                                            });

                                        break;

                                        case 'forma_pagamento':

                                            loadSelectOptions('formas_pagamentos', {
                                                placeholder : '-- selecione a opção --',
                                                selectElementName : `${item_name}-${field}`
                                            });

                                        break;

                                    }


                                });

                            }
    
                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                        })

                }

                // GET CAIXA
                function getCaixa(caixa_id){

                    if(parseInt(caixa_id) == NaN || parseInt(caixa_id) <= 0 ){
                        caixa_id = 1;
                        show('caixa-select-error', 'Erro ao selecionar um caixa', app_config.errors.timeout)
                        return
                    }

                    api.getData({ endpoint : { path : 'caixa', id : caixa_id } })
                        .then(resp => resp.json())
                        .then(results => {

                            if(results.error){
                                app_config.verbose ? console.error(results.msg) : '';
                            }else{

                                loadSelectOptions('caixa', {
                                    placeholder : '-- selecione o caixa --',
                                    selectElementName : 'caixa-id'
                                }, function() { // gambiarra
                                    
                                    if(getCurrentCaixa()){
                                        
                                        document.querySelector('#caixa-id').value = getCurrentCaixa();
                                        
                                        let change_event = document.createEvent('Event');
                                        change_event.initEvent('change', true, false);
                                        
                                        document.querySelector('#caixa-id').dispatchEvent(change_event);
                                        
                                        hide('form-abrir-caixa');
                    
                                        [...document.querySelectorAll('.caixa-window')].forEach(el => {
                                            el.classList.remove('d-none');
                                        });

                                        getCaixaForm();

                                    }

                                });

                                loadSelectOptions('', {
                                    placeholder : '-- selecione o produto --',
                                    selectElementName : 'modal_lancar_caixa-produto_id'
                                });

                                loadSelectOptions('formas_pagamentos', {
                                    placeholder : '-- selecione a forma de pagamento --',
                                    selectElementName : 'modal_lancar_caixa-forma_pagamento_id'
                                });

                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                        });

                }

                // GET CAIXA TEMP ACTUALY PRODUCTS SALED
                function getCaixaTemp(caixa_id){

                    api.getData({ endpoint : { path : 'caixa/temp', id : caixa_id } })
                        .then(resp => resp.json())
                        .then(results => {

                            if(results.error){
                                app_config.verbose ? console.error(results.msg) : '';
                            }else{

                                let fields = results.fields;
                                results = results.results;
    
                                loadTable(results, {
                                    table_name : 'caixa-table',
                                    table_columns : fields,
                                    item_name : 'caixa'
                                });

                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                        });

                }

                // GET INFO OF CAIXA TEMP SET INPUT, OUTPUT AND SALDO
                function getCaixaForm(){

                    api.getData({ endpoint : { path : 'caixa', id : getCurrentCaixa() } })
                        .then(resp => resp.json())
                        .then(results => {

                            if(!results.error){

                                results = results.results;

                                document.querySelector('#caixa-entrada').value = formatMoney(results.entrada);
                                document.querySelector('#caixa-saida').value = formatMoney(results.saida);
                                document.querySelector('#caixa-saldo').value = formatMoney(results.saldo);

                            }else{
                                app_config.verbose ? console.error(results.msg) : '';
                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                        });

                }

                // SHOW AND HIDE LOADING GIF IN REPORTS
                function toggleLoadingGif(){
                    
                    const loadingPrint = document.querySelectorAll('.loading-print');
                    
                    [...loadingPrint].forEach(load => { load.classList.contains('d-none') ? load.classList.remove('d-none') : load.classList.add('d-none') })

                }

                // ELEMENTS HOOOKS
                const app_window = [...document.querySelectorAll('.app-window')]; // APP WINDOWS
                const btn_menu = [...document.querySelectorAll('.btn-menu')]; // MENU BUTTONS
                const btn_logout = document.querySelector('#btn-logout'); // LOGOUT BTN

                // BUTTONS TO EDIT SELECT ELEMENTS
                const btn_edit_secao = document.querySelector('#edit-secao'); // EDIT SECTION BUTTON
                const btn_edit_categoria = document.querySelector('#edit-categoria'); // EDIT CATEGORIA BUTTON
                const btn_edit_cor = document.querySelector('#edit-cor'); // EDIT COLOR BUTTON
                const btn_edit_caixa = document.querySelector('#edit-caixa'); // EDIT CAIXA

                // ALL ADD OR SAVE BUTTONS
                let btns_add_save_item = [...document.querySelectorAll('.btn.btn-success.form-btn[type="button"]')].map(btn => {
                    if(btn.id.includes('save-')){
                        if(btn !== undefined){
                            return btn;
                        }else{
                            return 'aqui'
                        }
                    }
                });

                // GAMBIARRA
                btns_add_save_item.forEach((btn, i) => {
                    if(btn == undefined){
                        btns_add_save_item.splice(i, 1);
                    }
                });

                const btns_del_item = [...document.querySelectorAll('.btn.btn-danger')]; // DELETE BUTTONS

                // MODAL BUTTONS
                const btn_save_secao = document.querySelector('#btn-add-secao');
                const btn_save_categoria = document.querySelector('#btn-add-categoria');
                const btn_save_cor = document.querySelector('#btn-add-cor');
                const btn_saida_caixa = document.querySelector('#btn-lancar-saida');
                
                // CAIXA BUTTONS
                const btn_abrir_caixa = document.querySelector('#btn-abrir-caixa');
                const btn_lancar_caixa = document.querySelector('#lancar-caixa');
                const btn_lancar_saida_caixa = document.querySelector('#lancar-saida-caixa');
                const btn_fechar_caixa = document.querySelector('#fechar-caixa');

                // RELATORIOS BUTTONS
                const btn_relatorio_vendas = document.querySelector('#relatorio-vendas-btn');
                const btn_relatorio_contas_pagar = document.querySelector('#relatorio-contas_pagar-btn');
                const btn_relatorio_contas_receber = document.querySelector('#relatorio-contas_receber-btn');
                const btn_relatorio_produtos = document.querySelector('#relatorio-produto-btn');
                const btn_relatorio_estoque_material_producao = document.querySelector('#relatorio-estoque_material_producao-btn');
                const btn_relatorio_ordem_servico = document.querySelector('#relatorio-ordem_servico-btn');
                const btn_relatorio_recibo = document.querySelector('#relatorio-recibo-btn');
                const btn_relatorio_ordem_servico_add_item = document.querySelector('#btn-add-produto-ordem_servico');
                const btn_etiquetas = document.querySelector('#btn-etiquetas');

                //window.open(file_url, 'Imprimir pedido', "width=800,height=600");

                //const rports_inputs = [...document.querySelectorAll('.btn')].forEach((field) => { if(field.classList.contains('relatorio')) })
                const search_inputs = [...document.querySelectorAll('.inpt-search[type="search"]')]; // SEARCH INPUTS

                // BTN LOGOUT LISTENER
                btn_logout.addEventListener('click', (e) => {

                    api.logout()
                        .then(resp => { document.location.reload() })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                        })

                });

                // LISTENER TO LOAD APP WINDOW
                document.addEventListener('load_dash', (e) => {

                    const { dashboard_name } = e.detail;
                    showDashboardPage(dashboard_name)
    
                    switch(dashboard_name){
    
                        case 'clientes':
                            getDataTables(null, 'cliente');
                        break;
    
                        case 'fornecedores':
                            getDataTables(null, 'fornecedor');
                        break;

                        case 'vendedores':
                            getDataTables(null, 'vendedor');
                        break;

                        case 'prestadores_servicos':
                            getDataTables(null, 'prestador_servico');
                        break;

                        case 'produtos':
                            getDataTables(null, 'produto', true);
                            try{
                                translate()
                                $('#prd-foto').on('filecleared', function(e){ translate() }) // This event is triggered after the files in the preview are cleared.
                                /*$('#prd-foto').on('fileclear', function(e, files){ translate() })*/ // This event is triggered after a batch of files are selected and displayed in the preview. Additional parameters available are: files: the file stack array (or empty object if not available).
                            }catch(err){
                                app_config.verbose ? console.error(err) : '';
                            }
                        break;

                        case 'funcionarios':
                            getDataTables(null, 'funcionario');
                        break;
    
                        case 'estoque_material_producao':
                            getDataTables(null, 'estoque_material_producao', true);
                        break;

                        case 'estoque_produto_final':
                            getDataTables(null, 'estoque_produto_final', true);
                        break;

                        case 'contas_pagar':
                            getDataTables(null, 'contas_pagar', true);
                        break;

                        case 'contas_receber':
                            getDataTables(null, 'contas_receber', true);
                        break;

                        case 'relatorios-ordem_servico':

                            loadSelectOptions('', {
                                placeholder : '-- selecione o produto --',
                                selectElementName : 'relatorio-ordem_servico-produto'
                            });

                        break;
                        
                        case 'caixa':
                            getCaixa(getCurrentCaixa());
                        break;

                        case 'etiquetas':
                            getDataTables(null, 'etiquetas');
                        break;
    
                    }
    
                });
    
                loadDashboardPage(currentDashboard); // LOAD LAST STORAGE DASHBOARD
                initFieldsMasks(); // INIT FIELDS MASKS

                $('#modal_saida_caixa-saida').maskMoney();

                // ADD SECTION IN PRODUCTS FORM
                document.querySelector('#btn-add-secao').addEventListener('click', (e) => {

                    let secao_id = document.querySelector('#modal_secao-id').value;
                    let secao_nome = document.querySelector('#modal_secao-nome').value;

                    let data = {};

                    if(!secao_nome){
                        show('modal_secao-error', 'Preencha o nome da seção');
                        return;
                    }

                    data.nome = secao_nome;
                    data.endpoint = 'produtos/secao';
                    data.form_data = data;

                    if(secao_id){

                        data.id = secao_id;

                        api.saveData(data)
                            .then(resp => resp.json())
                            .then(results => {
    
                                if(results.error){
                                    show('modal_secao-error', results.msg, 4000);
                                }else{

                                    loadSelectOptions('secao', {
                                        placeholder : '-- selecione a opção --',
                                        selectElementName : 'produto-secao'
                                    });

                                    loadSelectOptions('secao', {
                                        placeholder : '-- selecione a opção --',
                                        selectElementName : 'modal_categoria-secao-select'
                                    });

                                    $('#modal_secao').val('');
                                    $('#modal_secao').modal('hide');

                                }
    
                            })
                            .catch(err => {
                                app_config.verbose ? console.error(err) : '';
                            });

                    }else{

                        api.createData(data)
                            .then(resp => resp.json())
                            .then(results => {
    
                                if(results.error){
                                    show('modal_secao-error', results.msg, 4000);
                                }else{
                                    
                                    loadSelectOptions('secao', {
                                        placeholder : '-- selecione a opção --',
                                        selectElementName : 'produto-secao'
                                    });

                                    loadSelectOptions('secao', {
                                        placeholder : '-- selecione a opção --',
                                        selectElementName : 'modal_categoria-secao-select'
                                    });

                                    $('#modal_secao').val('');
                                    $('#modal_secao').modal('hide');

                                }
    
                            })
                            .catch(err => {
                                app_config.verbose ? console.error(err) : '';
                            });

                    }

                });

                // ADD CATEGORIE IN PRODUCTS FORM
                document.querySelector('#btn-add-categoria').addEventListener('click', (e) => {

                    let categoria_id = document.querySelector('#modal_categoria-id').value;
                    let categoria_secao = document.querySelector('#modal_categoria-secao-select').value;
                    let categoria_nome = document.querySelector('#modal_categoria-nome').value;

                    let data = {};

                    if(!categoria_nome || !categoria_secao){
                        show('modal_categoria-error', 'Preencha todos os campos');
                        return;
                    }

                    data.nome = categoria_nome;
                    data.secao = categoria_secao;
                    data.endpoint = 'produtos/categoria';
                    data.form_data = data;

                    if(categoria_id){

                        data.id = secao_id;

                        api.saveData(data)
                            .then(resp => resp.json())
                            .then(results => {
    
                                if(results.error){
                                    show('modal_categoria-error', results.msg, 4000);
                                }else{

                                    loadSelectOptions('categoria', {
                                        placeholder : '-- selecione a opção --',
                                        selectElementName : 'produto-categoria'
                                    });
                                    
                                    $('#modal_categoria').val('');
                                    $('#modal_categoria').modal('hide');

                                }
    
                            })
                            .catch(err => {
                                app_config.verbose ? console.error(err) : '';
                            });

                    }else{

                        api.createData(data)
                            .then(resp => resp.json())
                            .then(results => {
    
                                if(results.error){
                                    show('modal_categoria-error', results.msg, 4000);
                                }else{
                                    
                                    loadSelectOptions('categoria', {
                                        placeholder : '-- selecione a opção --',
                                        selectElementName : 'produto-categoria'
                                    });

                                    $('#modal_categoria').val('');
                                    $('#modal_categoria').modal('hide');

                                }
    
                            })
                            .catch(err => {
                                app_config.verbose ? console.error(err) : '';
                            });

                    }

                });

                // ADD COLOR IN PRODUCTS FORM
                document.querySelector('#btn-add-cor').addEventListener('click', (e) => {

                    let cor_id = document.querySelector('#modal_cor-id').value;
                    let cor_nome = document.querySelector('#modal_cor-nome').value;

                    let data = {};

                    if(!cor_nome){
                        show('modal_cor-error', 'Preencha os campos');
                        return;
                    }

                    data.nome = cor_nome;
                    data.endpoint = 'produtos/cor';
                    data.form_data = data;

                    if(cor_id){

                        data.id = secao_id;

                        api.saveData(data)
                            .then(resp => resp.json())
                            .then(results => {
    
                                if(results.error){
                                    show('modal_cor-error', results.msg, 4000);
                                }else{

                                    loadSelectOptions('cor', {
                                        placeholder : '-- selecione a opção --',
                                        selectElementName : getCurrentDashboard() == 'produtos' ? 'produto-cor' : 'estoque_material_producao-cor'
                                    });
                                    
                                    $('#modal_cor').val('');
                                    $('#modal_cor').modal('hide');

                                }
    
                            })
                            .catch(err => {
                                app_config.verbose ? console.error(err) : '';
                            });

                    }else{

                        api.createData(data)
                            .then(resp => resp.json())
                            .then(results => {
    
                                if(results.error){
                                    show('modal_cor-error', results.msg, app_config.errors.timeout);
                                }else{
                                    
                                    loadSelectOptions('cor', {
                                        placeholder : '-- selecione a opção --',
                                        selectElementName : getCurrentDashboard() == 'produtos' ? 'produto-cor' : 'estoque_material_producao-cor'
                                    });

                                    $('#modal_cor').val('');
                                    $('#modal_cor').modal('hide');

                                }
    
                            })
                            .catch(err => {
                                app_config.verbose ? console.error(err) : '';
                            });

                    }

                });

                // BUTTON ABRIR CAIXA
                btn_abrir_caixa.addEventListener('click', (e) => {

                    api.caixa('abrir', getCurrentCaixa())
                        .then(resp => resp.json())
                        .then(results => {
                            
                            if(results.error){
                                app_config.verbose ? console.error(results.msg) : '';
                            }else{

                                hide('form-abrir-caixa');
                    
                                [...document.querySelectorAll('.caixa-window')].forEach(el => {
                                    el.classList.remove('d-none');
                                });

                                getCaixaForm();

                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                        });

                });

                // MODALS BUTTONS EDIT
                btn_edit_caixa.addEventListener('click', (e) => {

                    let caixa_id = document.querySelector('#caixa-id').value;

                    api.getData({ endpoint : { id : caixa_id, path : 'caixa' } })
                        .then(resp => resp.json())
                        .then(results => {

                            if(results.error){
                                app_config.verbose ? console.error(results.error) : '';
                            }else{

                                results = results.results;

                                document.querySelector('#modal_add_caixa-id').value = results.id;
                                document.querySelector('#modal_add_caixa-nome').value = results.nome;
                                document.querySelector('#modal_add_caixa-descricao').value = results.descricao;
                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                        })

                });

                btn_edit_secao.addEventListener('click', (e) => {

                    let secao_id = document.querySelector('#produto-secao').value;

                    api.getData({ endpoint : { id : secao_id, path : 'produtos/secao' } })
                        .then(resp => resp.json())
                        .then(results => {

                            if(results.error){
                                show('modal_secao-error', results.msg, app_config.errors.timeout);
                            }else{

                                results = results.results;

                                document.querySelector('#modal_secao-id').value = results.id;
                                document.querySelector('#modal_secao-nome').value = results.nome;
                                
                            }

                        })
                        .catch(err => {

                        })

                });

                btn_edit_categoria.addEventListener('click', (e) => {

                    let secao_id = document.querySelector('#produto-secao').value;
                    let categoria_id = document.querySelector('#produto-categoria').value;

                    api.getData({ endpoint : { id : categoria_id, path : 'produtos/categoria' } })
                        .then(resp => resp.json())
                        .then(results => {

                            if(results.error){
                                show('modal_categoria-error', results.msg, app_config.errors.timeout);
                            }else{

                                results = results.results;

                                document.querySelector('#modal_categoria-id').value = results.id;
                                document.querySelector('#modal_categoria-nome').value = results.nome;
                                document.querySelector('#modal_categoria-secao-select').value = results.secao;
                                
                                $('#modal_categoria-secao-select').trigger('change');

                                $('#modal_categoria-secao-select').select2({
                                    dropdownParent: $('#modal_categoria'),
                                    width : '100%'
                                });

                            }

                        })
                        .catch(err => {

                        })

                });

                btn_edit_cor.addEventListener('click', (e) => {

                    let cor_id = document.querySelector('#produto-cor').value;

                    api.getData({ endpoint : { id : cor_id, path : 'produtos/cor' } })
                        .then(resp => resp.json())
                        .then(results => {

                            if(results.error){
                                show('modal_cor-error', results.msg, app_config.errors.timeout);
                            }else{

                                results = results.results;

                                app_config.verbose ? console.log(results) : '';

                                document.querySelector('#modal_cor-id').value = results.id;
                                document.querySelector('#modal_cor-nome').value = results.nome;
                            }

                        })
                        .catch(err => {

                        })

                });

                // LISTENERS CAIXA
                btn_lancar_caixa.addEventListener('click', (e) => { 
                    
                    document.querySelector('#modal_lancar_caixa-id').value = getCurrentCaixa();

                    $('#modal_lancar_caixa-produto_id').select2({
                        dropdownParent: $('#modal_lancar_caixa'),
                        width : 'style'
                    });

                    $('#modal_lancar_caixa-forma_pagamento_id').select2({
                        dropdownParent: $('#modal_lancar_caixa'),
                        width : 'style'
                    });


                    $('#modal_lancar_caixa-quantidade').on('change', (e) => {
                        $('#modal_lancar_caixa-produto_id').trigger('change')
                    });

                    $('#modal_lancar_caixa-produto_id').on('change', (e) => {

                        let produto_id = document.querySelector('#modal_lancar_caixa-produto_id').value;
                        let produto_quantidade = document.querySelector('#modal_lancar_caixa-quantidade').value;
                    
                        if(produto_id){
                    
                            api.getData({ endpoint : { path : 'produtos', id : produto_id } })
                                .then(resp => resp.json())
                                .then(results => {
                                    
                                    if(results.error){
                                        show('modal_lancar_caixa-error', results.msg, app_config.errors.timeout);
                                    }else{
                                        
                                        results = results.results;

                                        let valor_venda = 0;
                                        let preco_produto = results.preco;
                                        let desconto_produto = results.desconto;
                                        let quantidade_produto = results.estoque_produto_final.estoque;

                                        document.querySelector('#caixa_produto_view_quantidade').innerHTML = `( ${quantidade_produto} unidades restantes )`;

                                        if(desconto_produto != 0){
                                            
                                            let desconto_real = (preco_produto * (desconto_produto/100));
                                            valor_venda = preco_produto - desconto_real;
                                            
                                        }else{
                                            valor_venda = preco_produto;
                                        }

                                        if(produto_quantidade){
                                            valor_venda *= produto_quantidade;
                                        }

                                        document.querySelector('#caixa_valor_view').innerHTML = formatMoney(valor_venda);
                                        document.querySelector('#modal_lancar_caixa-valor').value = valor_venda;
                    
                                    }
                    
                                })
                                .catch(err => {
                                    app_config.verbose ? console.error(err) : '';
                                });
                    
                        }
                    });

                });

                btn_lancar_saida_caixa.addEventListener('click', (e) => { document.querySelector('#modal_saida_caixa-id').value = getCurrentCaixa(); });
                
                btn_fechar_caixa.addEventListener('click', (e) => { 

                    api.caixa('fechar', getCurrentCaixa())
                        .then(resp => resp.json())
                        .then(results => {
                            
                            if(results.error){
                                app_config.verbose ? console.error(results.msg) : '';
                            }else{
                                localStorage.removeItem('current_caixa');
                                document.location.reload();
                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                        });

                });

                btn_saida_caixa.addEventListener('click', (e) => {

                    let caixa_id = document.querySelector('#modal_saida_caixa-id').value;
                    let saida = $('#modal_saida_caixa-saida').maskMoney('unmasked')[0];

                    if(!saida){
                        return;
                    }

                    let data = {};

                    data.id = caixa_id;
                    data.saida = parseFloat(saida);

                    data.endpoint = 'caixa/saida';
                    data.form_data = data;

                    api.createData(data)
                        .then(resp => resp.json())
                        .then(results => {

                            if(results.error){
                                show('modal_saida_caixa-error', results.msg, app_config.errors.timeout);
                            }else{
                                getCaixa(getCurrentCaixa());
                                clearForms();
                                $('#modal_saida_caixa').modal('hide');
                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                        });
                });

                // REPORTS LISTENERS
                btn_relatorio_vendas.addEventListener('click', (e) => {

                    const periodo_inicial = document.querySelector('#relatorio-vendas-periodo_inicial').value;
                    const periodo_final = document.querySelector('#relatorio-vendas-periodo_final').value;

                    let data = { periodo_inicial, periodo_final };

                    data.endpoint = 'vendas';
                    data.form_data = data;

                    api.printData(data)
                        .then(resp => resp.json())
                        .then(results => {

                            if(results.error){
                                show('relatorio-vendas-error', results.msg, app_config.errors.timeout)
                            }else{

                                let file_url = `${document.location.protocol}//${document.location.hostname}/public/pdfs/${results.filename}`;

                                toggleLoadingGif();

                                setTimeout(() => {
                                    window.open(file_url, 'Imprimir relatório', "width=800,height=600");
                                    toggleLoadingGif();
                                }, app_config.loading.timeout);

                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                        })

                });

                btn_relatorio_contas_pagar.addEventListener('click', (e) => {

                    const periodo_inicial = document.querySelector('#relatorio-contas_pagar-periodo_inicial').value;
                    const periodo_final = document.querySelector('#relatorio-contas_pagar-periodo_final').value;

                    let data = { periodo_inicial, periodo_final, type : 'pagar' };

                    data.endpoint = 'contas';
                    data.form_data = data;

                    api.printData(data)
                        .then(resp => resp.json())
                        .then(results => {

                            if(results.error){
                                show('relatorio-contas_pagar-error', results.msg, app_config.errors.timeout)
                            }else{

                                let file_url = `${document.location.protocol}//${document.location.hostname}/public/pdfs/${results.filename}`;

                                toggleLoadingGif();

                                setTimeout(() => {
                                    window.open(file_url, 'Imprimir relatório', "width=800,height=600");
                                    toggleLoadingGif();
                                }, app_config.loading.timeout);

                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                        })

                });

                btn_relatorio_contas_receber.addEventListener('click', (e) => {

                    const periodo_inicial = document.querySelector('#relatorio-contas_receber-periodo_inicial').value;
                    const periodo_final = document.querySelector('#relatorio-contas_receber-periodo_final').value;

                    let data = { periodo_inicial, periodo_final, type : 'receber' };

                    data.endpoint = 'contas';
                    data.form_data = data;

                    api.printData(data)
                        .then(resp => resp.json())
                        .then(results => {

                            if(results.error){
                                show('relatorio-contas_receber-error', results.msg, app_config.errors.timeout)
                            }else{
                                
                                let file_url = `${document.location.protocol}//${document.location.hostname}/public/pdfs/${results.filename}`;

                                toggleLoadingGif();

                                setTimeout(() => {
                                    window.open(file_url, 'Imprimir relatório', "width=800,height=600");
                                    toggleLoadingGif();
                                }, app_config.loading.timeout);

                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                        })

                });

                btn_relatorio_produtos.addEventListener('click', (e) => {

                    const periodo_inicial = document.querySelector('#relatorio-produto-periodo_inicial').value;
                    const periodo_final = document.querySelector('#relatorio-produto-periodo_final').value;

                    let data = { periodo_inicial, periodo_final };

                    data.endpoint = 'produtos';
                    data.form_data = data;

                    api.printData(data)
                        .then(resp => resp.json())
                        .then(results => {

                            if(results.error){
                                show('relatorio-produto-error', results.msg, app_config.errors.timeout)
                            }else{

                                let file_url = `${document.location.protocol}//${document.location.hostname}/public/pdfs/${results.filename}`;

                                toggleLoadingGif();

                                setTimeout(() => {
                                    window.open(file_url, 'Imprimir relatório', "width=800,height=600");
                                    toggleLoadingGif();
                                }, app_config.loading.timeout);

                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                            show('relatorio-produto-error', 'Ocorreu um erro ao fazer a requisição para o servidor', 5000)
                        })

                });

                btn_relatorio_estoque_material_producao.addEventListener('click', (e) => {

                    const periodo_inicial = document.querySelector('#relatorio-estoque_material_producao-periodo_inicial').value;
                    const periodo_final = document.querySelector('#relatorio-estoque_material_producao-periodo_final').value;

                    let data = { periodo_inicial, periodo_final };

                    data.endpoint = 'estoque_material_producao';
                    data.form_data = data;

                    api.printData(data)
                        .then(resp => resp.json())
                        .then(results => {

                            if(results.error){
                                show('relatorio-estoque_material_producao-error', results.msg, 5000)
                            }else{

                                let file_url = `${document.location.protocol}//${document.location.hostname}/public/pdfs/${results.filename}`;

                                toggleLoadingGif();

                                setTimeout(() => {
                                    window.open(file_url, 'Imprimir relatório', "width=800,height=600");
                                    toggleLoadingGif();
                                }, app_config.loading.timeout);

                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                            show('relatorio-estoque_material_producao-error', 'Ocorreu um erro ao fazer a requisição para o servidor', 5000)
                        })

                });

                document.querySelector('#relatorio-ordem_servico-quantidade').addEventListener('change', (e) => {

                    let produto = document.querySelector('#relatorio-ordem_servico-produto').value;
                    let span_view = document.querySelector('#ordem_servico-span');
                    let inpt = e.currentTarget;
                    let inpt_value = inpt.value;

                    app_config.verbose ? console.log(produto, inpt, inpt_value) : '';

                    let data = [];

                    if(produto && inpt_value){

                        if(localStorage.getItem('ordem_servico')){
                            data = JSON.parse(localStorage.getItem('ordem_servico'));
                        }
                        
                        data.push({
                            id : parseInt(produto),
                            quantidade : parseInt(inpt_value)
                        });

                        localStorage.setItem('ordem_servico', JSON.stringify(data))
                        span_view.innerHTML = `${data.length} produto selcionado`;

                        clearForms();

                    }

                });

                btn_relatorio_ordem_servico_add_item.addEventListener('click', (e) => {

                    let produto_id = document.querySelector('#relatorio-ordem_servico-produto');

                    if(produto_id){
                        document.querySelector('#relatorio-ordem_servico-quantidade').removeAttribute('disabled');
                    }else{
                        document.querySelector('#relatorio-ordem_servico-quantidade').setAttribute('disabled', true);
                    }

                });

                btn_relatorio_ordem_servico.addEventListener('click', (e) => {

                    if(!localStorage.getItem('ordem_servico')){
                        return;
                    }

                    let span_view = document.querySelector('#ordem_servico-span');
                    const produtos = JSON.parse(localStorage.getItem('ordem_servico'));

                    let data = { produtos };

                    data.endpoint = 'ordem_servico';
                    data.form_data = data;

                    api.printData(data)
                        .then(resp => resp.json())
                        .then(results => {

                            localStorage.removeItem('ordem_servico');

                            if(results.error){
                                show('relatorio-ordem_servico-error', results.msg, app_config.errors.timeout)
                            }else{

                                let file_url = `${document.location.protocol}//${document.location.hostname}/public/pdfs/${results.filename}`;
                                span_view.innerHTML = '0 produto selcionado';
                                
                                toggleLoadingGif();

                                setTimeout(() => {
                                    window.open(file_url, 'Imprimir ordem de serviço', "width=800,height=600");
                                    toggleLoadingGif();
                                }, app_config.loading.timeout);

                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                        })

                });

                btn_relatorio_recibo.addEventListener('click', (e) => {

                    const nome = document.querySelector('#relatorio-recibo-nome').value;
                    const cpf_cnpj = document.querySelector('#relatorio-recibo-cpf_cnpj').value;
                    const valor = parseFloat($('#relatorio-recibo-valor').val().replace(',', ''));
                    const descricao = document.querySelector('#relatorio-recibo-descricao').value;

                    let data = { nome, cpf_cnpj, valor, descricao };

                    data.endpoint = 'recibo';
                    data.form_data = data;

                    api.printData(data)
                        .then(resp => resp.json())
                        .then(results => {

                            if(results.error){
                                show('relatorio-recibo-error', results.msg, app_config.errors.timeout)
                            }else{

                                let file_url = `${document.location.protocol}//${document.location.hostname}/public/pdfs/${results.filename}`;

                                toggleLoadingGif();

                                setTimeout(() => {
                                    window.open(file_url, 'Imprimir recibo', "width=800,height=600");
                                    toggleLoadingGif();
                                }, app_config.loading.timeout);

                            }

                        })
                        .catch(err => {
                            app_config.verbose ? console.error(err) : '';
                            show('relatorio-recibo-error', 'Ocorreu um erro ao fazer a requisição para o servidor', 5000)
                        })

                });

                btn_etiquetas.addEventListener('click', (e) => {

                    //let produtos = document.querySelector('#etiquetas-ids').value;
                    let etiquetas_alert_error = document.querySelector('#etiquetas-error');

                    let produtos = etiquetas_obj;

                    if(!produtos.length){
                        show('etiquetas-error', 'Você precisa selecionar algum produto');
                        return;
                    }else{
                        api.generateBarcodes(produtos)
                            .then(resp => resp.json())
                            .then(results => {

                                if(results.error){
                                    show('etiquetas-error', results.error);
                                }else{
                                    
                                    let file_url = `${document.location.protocol}//${document.location.hostname}/public/pdfs/${results.filename}`;

                                    window.open(file_url, 'Imprimir etiquetas', "width=800,height=600");

                                }

                            })
                            .catch(err => {
                                app_config.verbose ? console.error(err) : '';
                                show('etiquetas-error', err);
                            })
                    }

                });

                // DELETE LISTENER
                setListener(btns_del_item, 'click', (e) =>{

                    if(getCurrentDashboard() != 'caixa'){

                        let btn_del = e.currentTarget;
                        let endpoint = localStorage.getItem('current_dashboard');

                        if(!btn_del){
                            show(`${getCurrentDashboard()}-error`, 'Botão de deletar inválido contate o suporte');
                            return;
                        }

                        let params;
                        let data;

                        try{
                        
                            params = { field_name : btn_del.getAttribute('id').split('-')[1], endpoint };
                            data = prepareDelete(params);
                        
                        }catch(err){
                        
                            app_config.verbose ? console.error(err) : '';

                            show(`${getCurrentDashboard()}-error`, 'Ocorreu um erro ao preparar o item para deletar');
                            return;
                        
                        }

                        if(!data){
                            show(`${getCurrentDashboard()}-error`, 'Os dados são inválidos para deletar');
                            return;
                        }

                        api.deleteItem(data)
                            .then(resp => resp.json())
                            .then(results => {

                                if(results.error){
                                    app_config.verbose ? console.error(results.msg) : '';
                                }else{
                                    loadDashboardPage(endpoint);
                                }

                            })
                            .catch(err => {
                                app_config.verbose ? console.error(err) : '';
                            });

                        clearForms();

                    }else{
                        app_config.verbose ? console.log(e.currentTarget) : '';
                    }

                });

                // LISTENER MENU BUTTONS
                setListener(btn_menu, 'click', (e) => {

                    let window_id = e.currentTarget.getAttribute('target-window');

                    app_config.verbose ? console.log('window_id', window_id) : '';

                    loadDashboardPage(window_id);

                });

                // LISTENER SEARCH INPUTS
                setListener(search_inputs, 'input', (e) => {

                    let inpt_id = e.currentTarget.id;
                    let search_ = document.querySelector(`#${inpt_id}`);
                    let endpoint = search_.getAttribute('data-bs-endpoint');
                    let item_name = search_.getAttribute('data-bs-itemId');
                    let search = search_.value;

                    if(search == null || search == '' || search == ' ' || search == undefined){
                        getDataTables(null, getCurrentDashboard());
                    }else{

                        api.searchData({ endpoint, search })
                            .then(resp => resp.json())
                            .then(results => {
                                
                                let fields = results.fields;

                                if(!results.error){

                                    results = results.results;

                                    if(inpt_id.includes('caixa')){

                                        app_config.verbose ? console.log(results) : '';

                                        if(results.length > 0){
                                            showModalError('Alerta', 'Existe mais de um produto cadastrado com esse código de barras');
                                            //alert('Existe mais de um produto cadastrado com esse código de barras');
                                        }

                                        document.querySelector('#modal_lancar_caixa-produto_id').value = results[0].id;
                                        $('#modal_lancar_caixa-produto_id').trigger('change');

                                    }else{

                                        app_config.verbose ? console.log(results, fields) : '';

                                        loadTable(results, {
                                            table_name : `${endpoint}-table`,
                                            table_columns : fields,
                                            item_name : item_name
                                        });

                                    }

                                }else{

                                    if(inpt_id.includes('caixa')){

                                    }else{

                                        loadTable([], {
                                            table_name : `${endpoint}-table`,
                                            table_columns : fields,
                                            item_name : item_name
                                        })

                                    }
                                    

                                }

                            })
                            .catch(err => {
                                app_config.verbose ? console.error(err) : '';
                            })
                        }

                });

                // LISTENER SAVE OR ADD DATA
                setListener(btns_add_save_item, 'click', async (e) => {

                    let btn = e.currentTarget;
                    let btn_id = btn.id.replace('save-', '');

                    let current_dashboard = getCurrentDashboard();
                    let checkAdd = true;
                    let checkSave = true;
                    let item_id  = document.querySelector(`#${btn_id}-id`).value.empty() ? null : document.querySelector(`#${btn_id}-id`).value;

                    app_config.verbose ? console.log('[+] ITEM ID ==>', item_id) : '';

                    if(current_dashboard == 'caixa'){
                        current_dashboard = 'caixa/temp';
                    }else if(current_dashboard == 'estoque_produto_final' && (document.querySelector(`#${btn_id}-id`).value == '' || parseInt(document.querySelector(`#${btn_id}-id`).value) == NaN)){
                        checkAdd = false;
                        checkSave = false;
                        show(`${btn_id}-error`, 'Selecione algum produto', app_config.errors.timeout);
                        return;
                    }else if(current_dashboard == 'estoque_material_producao' && document.querySelector(`#${btn_id}-id`).value == '' || parseInt(document.querySelector(`#${btn_id}-id`).value) == NaN){
                        checkAdd = false;
                        checkSave = false;
                        show(`${btn_id}-error`, 'Selecione algum produto', app_config.errors.timeout);
                        return;
                    }else if(current_dashboard == 'estoque_material_producao'){
                        if(checkSave){
                            
                            let saveData = prepareData(btn_id, current_dashboard);

                            api.saveData(saveData)
                                .then(resp => resp.json())
                                .then(results => {
                                    
                                    app_config.verbose ? console.log('[+] RESULTS SAVE ==>', results) : '';

                                    if(!results.error){
                                        clearForms();
                                        loadDashboardPage(getCurrentDashboard());
                                    }else{
                                        show(`${btn_id}-error`, results.msg, app_config.errors.timeout);
                                    }

                                })
                                .catch(err => {
                                    app_config.verbose ? console.error(err) : '';
                                });

                        }
                    }

                    if(current_dashboard == 'produtos'){
                        await api.uploadPhoto(document.querySelector('#prd-foto').files[0])
                            .then(resp => resp.json())
                            .then(results => {

                                if(results.error){
                                    show(`${btn_id}-error`, results.msg, app_config.errors.timeout);
                                    checkAdd = false;
                                    checkSave = false;
                                }else{
                                    document.querySelector('#produto-foto').value = results.filename;
                                    checkAdd = true;
                                    checkSave = true;
                                }

                            })
                            .catch(err => {
                                checkAdd = false;
                                checkSave = false;
                                app_config.verbose ? console.error(err) : '';
                            })
                    }else if(getCurrentDashboard() == 'produtos'){
                        app_config.verbose ? console.log(document.querySelector('#prd-foto').files) : '';
                        document.querySelector('#produto-foto').value = document.querySelector('#prd-foto').files[0].name;
                    }

                    let item_data = prepareData(btn_id, current_dashboard);

                    app_config.verbose ? console.log(item_id, item_data) : '';

                    let allowNullKeys = ['id', 'descricao', 'endpoint', 'form_data', 'produto', 'contas_pagar', 'contas_receber', 'pago', 'valor_pago', 'entrada', 'saida'];

                    if(current_dashboard == 'produtos'){

                        if(Object.keys(item_data.form_data).length == 0){
                            show(`${btn_id}-error`, `teste`, app_config.errors.timeout);
                            checkAdd = false;
                            checkSave = false;
                        }

                        Object.keys(item_data.form_data).forEach(key => {

                            if(!allowNullKeys.includes(key)){
                                if(key == 'desconto' && item_data.form_data[key] >= 0){
                                    checkAdd = true;
                                    checkSave = true;
                                }else if(key != 'desconto' && (item_data.form_data[key] == null || !item_data.form_data[key] || item_data.form_data[key] == '' || item_data.form_data[key].length == 0)){
                                    show(`${btn_id}-error`, `Preencha o campo ${key} 1`, app_config.errors.timeout);
                                    checkAdd = false;
                                    checkSave = false;
                                }
                            }

                        });

                    }
                    
                    if(!item_id && checkAdd){
                        
                        api.createData(item_data)
                            .then(resp => resp.json())
                            .then(results => {

                                if(results.error){
                                    show(`${btn_id}-error`, results.msg, app_config.errors.timeout);
                                }else{
                                    clearForms(true);
                                    loadDashboardPage(getCurrentDashboard());
                                }
        
                            })
                            .catch(err => {
                                app_config.verbose ? console.error(err) : '';
                            })

                    }else if(item_id && current_dashboard == 'caixa/temp'){

                        api.createData(item_data)
                            .then(resp => resp.json())
                            .then(results => {

                                if(results.error){
                                    show(`${btn_id}-error`, results.msg, 10000);
                                }else{
                                    loadDashboardPage(getCurrentDashboard());
                                    clearForms();
                                    $('#modal_lancar_caixa').modal('hide');
                                }

                                return;
        
                            })
                            .catch(err => {
                                app_config.verbose ? console.error(err) : '';
                            })

                    }else{

                        console.log(getCurrentDashboard());

                        Object.keys(item_data.form_data).forEach(key => {

                            if(!allowNullKeys.includes(key)){
                                
                                app_config.verbose ? console.log(key, item_data.form_data[key]) : '';
                                
                                if(key == 'desconto' && parseInt(item_data.form_data[key]) >= 0){
                                    checkSave = true
                                }else if(key != 'desconto' && (item_data.form_data[key] == null || !item_data.form_data[key] || item_data.form_data[key] == '' || item_data.form_data[key] == null || item_data.form_data[key] == undefined)){
                                    show(`${btn_id}-error`, `Preencha o campo ${key}`, app_config.errors.timeout);
                                    checkSave = false;
                                }else if((item_data.form_data[key] == null || !item_data.form_data[key] || item_data.form_data[key] == '' || item_data.form_data[key].length == 0)){
                                    show(`${btn_id}-error`, `Preencha o campo ${key}`, app_config.errors.timeout);
                                    checkSave = false;
                                }
                            }

                        });

                        if(!checkSave){
                            show(`${btn_id}-error`, 'Ocorreu um erro ao salvar o registro (js)', app_config.errors.timeout);
                            return;
                        }else{

                            app_config.verbose ? console.log('[+] SAVING DATA ==>', item_data) : '';

                            api.saveData(item_data)
                                .then(resp => resp.json())
                                .then(results => {
                                    
                                    app_config.verbose ? console.log('[+] RESULTS SAVE ==>', results) : '';

                                    if(!results.error){
                                        loadDashboardPage(getCurrentDashboard());
                                        clearForms(getCurrentDashboard() == 'produtos' ? true : false);
                                    }else{
                                        show(`${btn_id}-error`, results.msg, app_config.errors.timeout);
                                    }

                                })
                                .catch(err => {
                                    app_config.verbose ? console.error(err) : '';
                                });
                        }
                    
                    }

                });

            }

        });

    </script>
</body>
</html>
